(this.webpackJsonplibracoin=this.webpackJsonplibracoin||[]).push([[0],{107:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},218:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),s=a.n(c),l=a(10),i=a(101),o=a(8),u=(a(106),a(223)),d=a(225),b=(a(107),a(1));function j(){return Object(b.jsxs)(u.a,{expand:"lg",className:"mb-3",children:[Object(b.jsx)(u.a.Brand,{"aria-label":"LibraCoin Logo",href:"https://github.com/lbragile/LibraCoin",children:Object(b.jsx)("img",{src:"./assets/libracoin-logo-256.png",alt:"LibraCoin Logo",width:"64"})}),Object(b.jsx)(u.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(b.jsx)(u.a.Collapse,{id:"basic-navbar-nav",children:Object(b.jsxs)(d.a,{className:"ml-auto",children:[Object(b.jsx)(d.a.Link,{href:"/LibraCoin/wallet",active:location.href.includes("/wallet"),children:"Wallet"}),Object(b.jsx)(d.a.Link,{href:"/LibraCoin/mine",active:location.href.includes("/mine"),children:"Mine"}),Object(b.jsx)(d.a.Link,{href:"/LibraCoin/blockchain",active:location.href.includes("/blockchain"),children:"Blockchain"})]})})]})}var x,m=a(7),h=a.n(m),p=a(11),O=a(12),f=a(220),v=a(224),y=r.a.createContext(void 0);function g(e,t,a){e.value.includes("\u25e6")?e.blur():(e.select(),document.execCommand("copy"),a({type:x.ASSIGN_COPIED,payload:{copied:t}}))}function S(e){e({type:x.ASSIGN_COPIED,payload:{copied:""}})}!function(e){e.ADD_VERIFIED_TRANS="ADD_VERIFIED_TRANS",e.UPDATE_VERIFIED_TRANS="UPDATE_VERIFIED_TRANS",e.UPDATE_SELECTED_TRANS="UPDATE_SELECTED_TRANS",e.UPDATE_USERS="UPDATE_USERS",e.SET_MAIN_USER="SET_MAIN_USER",e.ADD_BLOCK="ADD_BLOCK",e.UPDATE_BLOCK="UPDATE_BLOCK",e.UPDATE_PREVIEW="UPDATE_PREVIEW",e.ASSIGN_COPIED="ASSIGN_COPIED",e.SET_SIGNED="SET_SIGNED",e.SET_VALIDATED="SET_VALIDATED",e.SET_DETAILS="SET_DETAILS"}(x||(x={}));var T=a(95);function w(e){return Array.from(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join("")}function N(e,t){return E.apply(this,arguments)}function E(){return(E=Object(O.a)(h.a.mark((function e(t,a){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey(t,a);case 2:return n=e.sent,e.abrupt("return",w(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return A.apply(this,arguments)}function A(){return(A=Object(O.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(new T.TextEncoder).encode(t),e.next=3,window.crypto.subtle.digest("SHA-256",a);case 3:return n=e.sent,e.abrupt("return",w(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return w(window.crypto.getRandomValues(new Uint32Array(e)))}a(69);function D(){var e=Object(n.useContext)(y),t=e.state,a=e.dispatch,r=Object(n.useRef)(4),c=Object(n.useState)(!1),s=Object(l.a)(c,2),i=s[0],o=s[1];return Object(n.useEffect)((function(){function e(){return(e=Object(O.a)(h.a.mark((function e(){var n,r,c,s,l,i,o,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.user.privateKey){e.next=17;break}return e.next=3,window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]);case 3:return n=e.sent,r=n.publicKey,c=n.privateKey,e.next=8,N("spki",r);case 8:return s=e.sent,e.next=11,N("pkcs8",c);case 11:l=e.sent,i=Number(1e3).toFixed(2),o={publicKey:s,privateKey:l,balance:i},a({type:x.SET_MAIN_USER,payload:{user:o}}),u=[].concat(Object(p.a)(t.users),[{publicKey:s,balance:i}]),a({type:x.UPDATE_USERS,payload:{users:u}});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,t.user.privateKey,t.users]),Object(b.jsxs)("div",{className:"container-fluid d-flex justify-content-center mx-auto row my-5",children:[Object(b.jsxs)(f.a,{className:"user-key col-12 col-lg-5 pl-3 pl-lg-0",children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Public"})}),Object(b.jsx)(v.a.Control,{"aria-label":"publicKey",as:"textarea",rows:r.current,className:"rounded-right",value:t.user.publicKey,isValid:"walletPK"===t.copied,onFocus:function(e){return g(e.target,"walletPK",a)},onBlur:function(){return S(a)},readOnly:!0}),Object(b.jsx)(v.a.Control.Feedback,{type:"valid",children:"Copied to clipboard!"})]}),Object(b.jsxs)(f.a,{className:"user-key col-12 col-lg-5 pl-3",children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Private"})}),Object(b.jsx)(v.a.Control,{"aria-label":"privateKey",as:"textarea",rows:r.current,value:i?t.user.privateKey:new Array(t.user.privateKey.length).fill("\u25e6").join(""),onFocus:function(e){return g(e.target,"walletSK",a)},onBlur:function(){return S(a)},isValid:"walletSK"===t.copied,readOnly:!0}),Object(b.jsx)(f.a.Append,{children:Object(b.jsx)(f.a.Text,{className:"rounded-right",children:Object(b.jsx)("span",{id:"private-reveal-eyes",onClick:function(){return o(!i)},children:"\ud83d\udc40"})})}),Object(b.jsx)(v.a.Control.Feedback,{type:"valid",children:"Copied to clipboard!"})]})]})}function I(){var e=Object(n.useContext)(y),t=e.state,a=e.dispatch;return Object(b.jsxs)("div",{className:"container-fluid mb-2",children:[Object(b.jsx)("h3",{className:"font-weight-bold",children:"Users"}),Object(b.jsx)("div",{className:"row flex-nowrap overflow-auto bg-dark mx-1 px-2 rounded",children:t.users.map((function(e,n){return Object(b.jsxs)(v.a,{className:"user-item rounded flex-shrink-0",children:[Object(b.jsxs)(f.a,{children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"\ud83d\udd11"})}),Object(b.jsx)(v.a.Control,{"aria-label":"User Public Key",type:"text",className:"text-truncate rounded-right",onFocus:function(e){return g(e.target,"userItem-"+n,a)},onBlur:function(){return S(a)},defaultValue:e.publicKey,isValid:t.copied==="userItem-"+n,readOnly:!0}),Object(b.jsx)(v.a.Control.Feedback,{type:"valid",children:"Copied to clipboard"})]}),Object(b.jsxs)(f.a,{className:"mt-2",children:[Object(b.jsx)(v.a.Control,{"aria-label":"balance",type:"number",defaultValue:e.balance,disabled:!0}),Object(b.jsx)(f.a.Append,{children:Object(b.jsx)(f.a.Text,{children:"LC"})})]})]},"user-".concat(e.publicKey))}))})]})}var P=a(4),_=a(30),R=a(221),K=a(39);var L=function(e,t){return void 0===t||t>=e},U=function(e){var t=Number(e);return Math.floor(t)===t||!e||e.toString().split(".")[1].length<=2},V=function(e,t){return K.b().shape({to:K.c().min(e,(function(e){var t=e.min-e.value.length;return"Length is too short. Add ".concat(t," alphanumeric character").concat(1===t?"":"s")})).max(e,(function(e){var t=e.value.length-e.max;return"Length is too long. Remove ".concat(t," alphanumeric character").concat(1===t?"":"s")})).matches(new RegExp("[A-Za-z0-9]{".concat(e,"}")),"Format is invalid, characters must be alphanumeric").required("Receiver Public Key is required!"),amount:K.a().test("negative","Cannot be a negative value",(function(e){return L(0,e)})).test("min","Must be at least $0.10 LC",(function(e){return L(.1,e)})).test("format","Allowed at most 2 decimal places",U).max(t,"Must be at most $".concat((a=t,a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))," LC")).required("Amount is required!"),msg:K.c().optional()});var a};function B(){var e=Object(n.useContext)(y),t=e.state,a=e.dispatch;Object(n.useEffect)((function(){a({type:x.SET_VALIDATED,payload:{validated:!1}}),a({type:x.SET_SIGNED,payload:{signed:!1,sent:!1}}),a({type:x.SET_DETAILS,payload:{details:{from:t.user.publicKey,to:"",amount:Number(0).toFixed(2),msg:"",signature:""}}})}),[a,t.user.publicKey]);var r=function(e){return Object(b.jsx)(v.a.Control,Object(P.a)({as:"textarea"},e))};return Object(b.jsx)(_.c,{validationSchema:V(t.user.publicKey.length,t.user.balance),onSubmit:function(){var e=Object(O.a)(h.a.mark((function e(n,r){var c,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=r.setSubmitting)(!0),s=Object.values(n).reduce((function(e,t){return e+t}),""),e.t0=P.a,e.t1=Object(P.a)({},n),e.t2={},e.t3=t.user.publicKey,e.next=9,k(s);case 9:e.t4=e.sent,e.t5={from:e.t3,signature:e.t4},l=(0,e.t0)(e.t1,e.t2,e.t5),a({type:x.SET_SIGNED,payload:{signed:!0}}),a({type:x.SET_DETAILS,payload:{details:l}}),c(!1);case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),initialValues:{to:"",amount:"",msg:""},children:function(e){var a=e.handleSubmit,n=e.isSubmitting,c=e.touched,s=e.errors;return Object(b.jsxs)(v.a,{"aria-label":"Sign Form",noValidate:!0,className:"col-12 col-lg-5 trans-form",onSubmit:a,children:[Object(b.jsxs)(f.a,{children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Sender Public Key"})}),Object(b.jsx)(v.a.Control,{"aria-label":"Sender Public Key",name:"from",className:"text-truncate rounded-right",type:"text",value:t.user.publicKey,readOnly:!0})]}),Object(b.jsx)(v.a.Text,{className:"text-muted",children:"Used to verify transaction was signed using your private key"}),Object(b.jsxs)(f.a,{className:"my-2",children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Receiver Public Key"})}),Object(b.jsx)(_.b,{as:v.a.Control,"aria-label":"Receiver PK",name:"to",className:"text-truncate rounded-right",type:"text",required:!0,readOnly:t.wallet.signed,isInvalid:!!c.to&&!!s.to,isValid:!!c.to&&!s.to}),Object(b.jsx)(_.a,{name:"to",render:function(e){return Object(b.jsx)(v.a.Control.Feedback,{className:"font-weight-bold",type:"invalid",role:"alert","aria-label":"Receiver PK Feedback",children:e})}})]}),Object(b.jsxs)(f.a,{className:"mb-2",children:[Object(b.jsx)(_.b,{as:v.a.Control,"aria-label":"Sign Amount",name:"amount",type:"number",step:"any",placeholder:1..toFixed(2),required:!0,readOnly:t.wallet.signed,isInvalid:!!c.amount&&!!s.amount,isValid:!!c.amount&&!s.amount}),Object(b.jsx)(f.a.Append,{children:Object(b.jsx)(f.a.Text,{className:"rounded-right border-left-0",children:"LC"})}),Object(b.jsx)(_.a,{name:"amount",render:function(e){return Object(b.jsx)(v.a.Control.Feedback,{className:"font-weight-bold",type:"invalid",role:"alert","aria-label":"Amount Feedback",children:e})}})]}),Object(b.jsxs)(f.a,{className:"mb-2",children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Message"})}),Object(b.jsx)(_.b,{as:r,"aria-label":"Sign Message",name:"msg",rows:2,placeholder:"optional message...",readOnly:t.wallet.signed,isValid:!!c.msg&&!s.msg})]}),Object(b.jsxs)(f.a,{children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Sender Private Key"})}),Object(b.jsx)(v.a.Control,{"aria-label":"Sender Private Key",name:"fromSK",className:"text-truncate",type:"text",value:t.user.privateKey,readOnly:!0})]}),Object(b.jsx)(v.a.Text,{className:"text-muted",children:"Not shared with anyone, keep this secret!"}),Object(b.jsx)(R.a,{"aria-label":"Sign Button",className:"mt-2",variant:t.wallet.signed?"success":"primary",type:"submit",disabled:t.wallet.signed||n,block:!0,children:Object(b.jsx)("b",{children:t.wallet.signed?"Signed":"Sign"})})]})}})}function F(){var e=Object(n.useContext)(y),t=e.state,a=e.dispatch;return Object(b.jsxs)(v.a,{"aria-label":"Send Form",noValidate:!0,className:"col-12 col-lg-5 my-2 my-lg-0 trans-form",onSubmit:function(e){e.preventDefault(),a({type:x.SET_SIGNED,payload:{signed:!1}}),a({type:x.SET_VALIDATED,payload:{validated:!1}}),a({type:x.ADD_VERIFIED_TRANS,payload:{trans:t.wallet.details}}),a({type:x.SET_DETAILS,payload:{details:{from:"",to:"",amount:(0).toFixed(2),msg:"",signature:""}}})},children:[Object(b.jsxs)(f.a,{children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Receiver Public Key"})}),Object(b.jsx)(v.a.Control,{"aria-label":"Receiver PK",name:"receiver-pk",className:"text-truncate",type:"text",value:t.wallet.details.to,readOnly:!0})]}),Object(b.jsx)(v.a.Text,{className:"text-muted",children:"Make sure this matches the value used when signing"}),Object(b.jsxs)(f.a,{className:"my-2",children:[Object(b.jsx)(v.a.Control,{"aria-label":"Send Amount",name:"amount",type:"number",value:t.wallet.details.amount,readOnly:!0}),Object(b.jsx)(f.a.Append,{children:Object(b.jsx)(f.a.Text,{className:"rounded-right border-left-0",children:"LC"})})]}),Object(b.jsxs)(f.a,{className:"mb-2",children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Message"})}),Object(b.jsx)(v.a.Control,{"aria-label":"Send Message",name:"msg",as:"textarea",value:t.wallet.details.msg,rows:4,placeholder:"optional message...",readOnly:!0})]}),Object(b.jsxs)(f.a,{children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Transaction Signature"})}),Object(b.jsx)(v.a.Control,{"aria-label":"Transaction Signature",name:"sig",type:"text",className:"text-truncate",value:t.wallet.details.signature,readOnly:!0})]}),Object(b.jsx)(v.a.Text,{className:"text-muted",children:"Receiver uses this along with your public key to verify transaction"}),Object(b.jsx)(R.a,{"aria-label":"Send Button",className:"mt-2",variant:t.wallet.sent?"success":"primary",type:"submit",disabled:!t.wallet.signed,block:!0,children:Object(b.jsx)("b",{children:t.wallet.sent?"Sent":"Send"})})]})}function M(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(j,{}),Object(b.jsx)(D,{}),Object(b.jsxs)("div",{className:"container-fluid d-flex justify-content-center mx-auto row my-4",children:[Object(b.jsx)(B,{}),Object(b.jsx)(F,{})]}),Object(b.jsx)(I,{})]})}a(64);function H(e){var t=e.chain,a=e.index,c=Object(n.useContext)(y),s=c.state,l=c.dispatch;return Object(b.jsxs)(v.a,{"aria-label":"Block Form",className:(t?"":"col-10 col-lg-5 ")+"my-4 my-lg-0 p-2 rounded "+(t&&s.chain[a].valid||!t&&s.preview.valid?"valid-block":"invalid-block"),children:[Object(b.jsxs)(f.a,{className:"mb-2",children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Index"})}),Object(b.jsx)(v.a.Control,{"aria-label":"Block Index",name:"index",type:"number",value:t?a:s.preview.index,disabled:!0})]}),Object(b.jsxs)(f.a,{className:"my-2",children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Timestamp"})}),Object(b.jsx)(v.a.Control,{"aria-label":"Block Timestamp",name:"timestamp",type:"number",value:t?s.chain[a].timestamp:s.preview.timestamp,disabled:!0})]}),Object(b.jsxs)(f.a,{className:"my-2",children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Previous #"})}),Object(b.jsx)(v.a.Control,{"aria-label":"Block PrevHash",name:"prevHash",className:"text-truncate",type:"text",value:t&&a>0?s.chain[a-1].currHash:t?"":s.preview.prevHash,readOnly:!0})]}),Object(b.jsxs)(f.a,{className:"my-2",children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Current #"})}),Object(b.jsx)(v.a.Control,{"aria-label":"Block CurrHash",name:"currHash",className:"text-truncate",type:"text",value:t?s.chain[a].currHash:s.preview.currHash,readOnly:!0})]}),Object(b.jsxs)(f.a,{className:"mt-2",children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Merkle #"})}),t&&0===a?Object(b.jsx)(v.a.Control,{"aria-label":"Block Merkle Genesis",name:"merkleRoot",type:"text",defaultValue:"",disabled:!0}):Object(b.jsxs)(r.a.Fragment,{children:[Object(b.jsx)(v.a.Control,{"aria-label":"Block Merkle",name:"merkleRoot",className:"text-truncate",type:"text",value:t?s.chain[a].merkleRoot:s.preview.merkleRoot,readOnly:!0}),t&&Object(b.jsx)(f.a.Append,{children:Object(b.jsx)(f.a.Text,{"aria-label":"Show Trans",className:"show-trans-eye",onClick:function(){return function(){var e=s.chain[a];l({type:x.UPDATE_BLOCK,payload:{block:Object(P.a)(Object(P.a)({},e),{},{showTrans:!e.showTrans})}})}()},children:s.chain[a].showTrans?"\ud83d\ude48":"\ud83d\ude49"})})]})]}),!t&&s.preview.valid&&Object(b.jsx)(R.a,{"aria-label":"Add Block",className:"mt-2",variant:"success",block:!0,onClick:function(){return function(){var e=Object(P.a)(Object(P.a)({},s.preview),{},{transactions:s.selectedTrans,valid:s.chain[s.preview.index-1].valid,showTrans:!1}),t={timestamp:Date.now(),index:s.preview.index+1,prevHash:s.preview.currHash,currHash:"",merkleRoot:"",valid:!1};l({type:x.ADD_BLOCK,payload:{block:e}}),l({type:x.UPDATE_VERIFIED_TRANS}),l({type:x.UPDATE_SELECTED_TRANS,payload:{selectedTrans:[]}}),l({type:x.UPDATE_PREVIEW,payload:{preview:t}})}()},children:Object(b.jsx)("h4",{className:"my-0",children:"Add Block"})})]})}var J=a(32);function G(e,t){return W.apply(this,arguments)}function W(){return(W=Object(O.a)(h.a.mark((function e(t,a){var n,r,c,s,l,i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[[""]],!(a.length>0)){e.next=26;break}r=t.map((function(e){return e.signature})),c=a.map((function(e){return e.signature})),s=r.filter((function(e){return c.includes(e)})),n=[s];case 6:if(1===s.length){e.next=26;break}l=[],i=0;case 9:if(!(i<s.length)){e.next=22;break}if(!s[i+1]){e.next=16;break}return e.next=13,k(s[i]+s[i+1]);case 13:e.t0=e.sent,e.next=17;break;case 16:e.t0=s[i];case 17:o=e.t0,l.push(o);case 19:i+=2,e.next=9;break;case 22:s=l,n.push(l),e.next=6;break;case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return e[e.length-1][0]}function z(e){var t=e.index,a=Object(n.useContext)(y),r=a.state,c=a.dispatch,s=Object(n.useState)(r.chain[t].transactions),i=Object(l.a)(s,2),o=i[0],u=i[1];function d(e,t,a){return j.apply(this,arguments)}function j(){return(j=Object(O.a)(h.a.mark((function e(a,n,s){var l,i,d,b,j,m,p,O,f,v,y;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(l=JSON.parse(JSON.stringify(o)))[n]=Object(P.a)(Object(P.a)({},l[n]),{},Object(J.a)({},s,a)),i=l[n].to+l[n].from+l[n].amount+l[n].msg,e.next=5,k(i);case 5:return l[n].signature=e.sent,u(l),e.next=9,G(l,l);case 9:d=e.sent,b=q(d),j=[],m=Date.now(),p=r.chain[t].prevHash,O="",f=t;case 16:if(!(f<r.chain.length)){e.next=27;break}return v=f===t?l:r.chain[f].transactions,y=f===t?b:r.chain[f].merkleRoot,e.next=21,k(f+p+y);case 21:O=e.sent,j.push(Object(P.a)(Object(P.a)({},r.chain[f]),{},{timestamp:m,prevHash:p,currHash:O,transactions:v,merkleRoot:y,valid:!1})),p=O;case 24:f++,e.next=16;break;case 27:c({type:x.UPDATE_BLOCK,payload:{block:j}});case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsx)("div",{className:"row flex-nowrap overflow-auto mx-1 p-2 rounded bg-dark",children:o.map((function(e,t){var a;return Object(b.jsxs)("div",{className:(o.length>1&&t!==o.length-1?"mr-2 ":"")+"col-12 bg-light border border-dark p-1 rounded",children:[Object(b.jsxs)(v.a.Group,{className:"mb-2 text-center",children:[Object(b.jsx)(v.a.Control,{className:"text-truncate",type:"text",value:e.from,onChange:function(e){return d(e.target.value,t,"from")}}),Object(b.jsx)("h3",{className:"my-0",children:"\u2193"}),Object(b.jsx)(v.a.Control,{className:"text-truncate",type:"text",value:e.to,onChange:function(e){return d(e.target.value,t,"to")}})]}),Object(b.jsxs)(f.a,{className:"mb-2",children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Msg"})}),Object(b.jsx)(v.a.Control,{as:"textarea",rows:3,value:e.msg,onChange:function(e){return d(e.target.value,t,"msg")}})]}),Object(b.jsxs)(f.a,{className:"mb-2",children:[Object(b.jsx)(v.a.Control,{type:"number",value:null!==(a=e.amount)&&void 0!==a?a:0,onChange:function(e){return d(e.target.value,t,"amount")}}),Object(b.jsx)(f.a.Append,{children:Object(b.jsx)(f.a.Text,{children:"LC"})})]}),Object(b.jsxs)(f.a,{children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Sig"})}),Object(b.jsx)(v.a.Control,{className:"text-truncate",type:"text",value:e.msg,readOnly:!0},e.signature)]})]},"sig:".concat(t))}))})}function $(e){var t=Object(n.useContext)(y),a=t.state,r=t.dispatch,c=Object(n.useRef)(0),s=Object(n.useState)(0),i=Object(l.a)(s,2),o=i[0],u=i[1],d=Object(n.useState)(""),j=Object(l.a)(d,2),m=j[0],p=j[1],g=Object(n.useState)(""),S=Object(l.a)(g,2),T=S[0],w=S[1],N=Object(n.useState)(!1),E=Object(l.a)(N,2),A=E[0],D=E[1];function I(){return(I=Object(O.a)(h.a.mark((function t(){var n,s,l,i,o,d,b,j,m,O,f,v,y,g,S,T;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.chain,s=e.index,D(!0),c.current=Math.round(1e6*Math.random()),l=Math.round(Math.random())+2,i=new RegExp("^.{0,".concat(l,"}"),"g"),o=new Array(l).fill("0").join(""),t.next=8,k(C(20));case 8:d=(d=t.sent).replace(i,o),p(d),b="",j=c.current;case 13:if(!(j<=Number.MAX_SAFE_INTEGER)){t.next=24;break}return t.next=16,k(j.toString());case 16:if(b=t.sent,w(b),u(j++),m=new RegExp("^0{".concat(l,"}")),!b.match(m)){t.next=22;break}return t.abrupt("break",24);case 22:t.next=13;break;case 24:if(D(!1),O=Date.now(),f=Object(J.a)({},n?"block":"preview",Object(P.a)(Object(P.a)({},n?a.chain[s]:a.preview),{},{timestamp:O,prevHash:a.chain[(n?s:a.preview.index)-1].currHash,currHash:b,valid:b<=d})),v=n?x.UPDATE_BLOCK:x.UPDATE_PREVIEW,r({type:v,payload:f}),!n){t.next=44;break}y=[],g=b,S="",T=s+1;case 34:if(!(T<a.chain.length)){t.next=43;break}return t.next=37,k(T+g+a.chain[T].merkleRoot);case 37:S=t.sent,y.push(Object(P.a)(Object(P.a)({},a.chain[T]),{},{timestamp:O,prevHash:g,currHash:S,valid:!1})),g=S;case 40:T++,t.next=34;break;case 43:y.length&&r({type:x.UPDATE_BLOCK,payload:{block:y}});case 44:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(b.jsxs)(v.a,{"aria-label":"Block Statistics",className:e.chain?"my-3":"col-11 col-lg-5 mx-3",children:[Object(b.jsxs)(f.a,{className:"my-2",children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Nonce"})}),Object(b.jsx)(v.a.Control,{"aria-label":"Block Nonce",name:"nonce",type:"number",defaultValue:c.current,disabled:!0},c.current)]}),Object(b.jsxs)(f.a,{className:"my-2",children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Header"})}),Object(b.jsx)(v.a.Control,{"aria-label":"Block Header",name:"header",type:"number",value:o,disabled:!0})]}),Object(b.jsxs)(f.a,{className:"my-2",children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Target"})}),Object(b.jsx)(v.a.Control,{"aria-label":"Block Target",name:"target",className:"text-truncate",type:"text",value:m,readOnly:!0})]}),Object(b.jsxs)(f.a,{className:"my-2",children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Sol'n"})}),Object(b.jsx)(v.a.Control,{"aria-label":"Block Solution",name:"solution",className:"text-truncate "+(e.chain&&a.chain[e.index].valid||!e.chain&&a.preview.valid?"valid-solution":"invalid-solution"),type:"text",value:T,readOnly:!0})]}),Object(b.jsx)(R.a,{"aria-label":"Block Mine",variant:"primary",className:"btn-block mt-2 py-2",disabled:e.chain&&a.chain[e.index].valid||!e.chain&&(a.preview.valid||0===a.selectedTrans.length)||A,onClick:function(){return function(){return I.apply(this,arguments)}()},children:Object(b.jsxs)("h4",{className:"my-0 row justify-content-end align-items-center flex-nowrap",children:[Object(b.jsx)("span",{className:"col-10 pl-5",children:"Mine"}),Object(b.jsx)("span",{className:"spinner-border spinner-border-md mr-3 "+(A?"visible":"invisible"),role:"status"})]})})]})}function X(){var e=Object(n.useContext)(y).state;return Object(b.jsxs)("div",{children:[Object(b.jsx)(j,{}),Object(b.jsx)("div",{className:"mx-3 row flex-nowrap overflow-auto",children:e.chain.map((function(e){return Object(b.jsxs)("div",{className:"block mx-2 flex-column flex-shrink-0",children:[Object(b.jsx)(H,{chain:!0,index:e.index}),Object(b.jsx)($,{chain:!0,index:e.index}),e.showTrans&&Object(b.jsx)(z,{index:e.index})]},e.prevHash)}))})]})}a(214);function Y(){var e=Object(n.useContext)(y),t=e.state,a=e.dispatch;function r(){return(r=Object(O.a)(h.a.mark((function e(n){var r,c,s,l,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=JSON.parse(JSON.stringify(t.selectedTrans)),c=r.map((function(e){return e.signature})),s=c.includes(n.signature),!(r.length<4||s)){e.next=13;break}return s?r=r.filter((function(e){return e.signature!==n.signature})):r.push(n),e.next=7,G(t.verifiedTrans,r);case 7:l=e.sent,i=Object(P.a)(Object(P.a)({},t.preview),{},{merkleRoot:q(l),valid:!1}),a({type:x.UPDATE_SELECTED_TRANS,payload:{selectedTrans:r}}),a({type:x.UPDATE_PREVIEW,payload:{preview:i}}),e.next=14;break;case 13:alert("You can mine at most 4 transactions at a time!");case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)("div",{className:"container-fluid",children:[Object(b.jsx)("h3",{"aria-label":"Title",className:"font-weight-bold",children:"Verified Transactions"}),Object(b.jsx)("div",{className:"trans-list row flex-nowrap overflow-auto bg-dark mx-1 px-2 rounded",children:t.verifiedTrans.map((function(e){return Object(b.jsxs)(v.a,{"aria-label":"Transaction Information",className:"trans-item "+(t.selectedTrans.map((function(e){return e.signature})).includes(e.signature)?"selected":"not-selected"),onClick:function(){return function(e){return r.apply(this,arguments)}(e)},children:[Object(b.jsxs)(v.a.Group,{className:"mb-2 text-center",children:[Object(b.jsx)(v.a.Control,{"aria-label":"Transaction From",name:"from",className:"text-truncate",type:"text",defaultValue:e.from,readOnly:!0}),Object(b.jsx)("h3",{className:"my-0",children:"\u2193"}),Object(b.jsx)(v.a.Control,{"aria-label":"Transaction To",name:"to",className:"text-truncate",type:"text",defaultValue:e.to,readOnly:!0})]}),Object(b.jsxs)(f.a,{className:"mb-2",children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Msg"})}),Object(b.jsx)(v.a.Control,{"aria-label":"Transaction Message",name:"msg",as:"textarea",defaultValue:e.msg,readOnly:!0})]}),Object(b.jsxs)(f.a,{className:"mb-2",children:[Object(b.jsx)(v.a.Control,{"aria-label":"Transaction Amount",name:"amount",type:"number",defaultValue:e.amount,disabled:!0}),Object(b.jsx)(f.a.Append,{children:Object(b.jsx)(f.a.Text,{children:"LC"})})]}),Object(b.jsxs)(f.a,{children:[Object(b.jsx)(f.a.Prepend,{children:Object(b.jsx)(f.a.Text,{children:"Sig"})}),Object(b.jsx)(v.a.Control,{"aria-label":"Transaction Signature",name:"signature",className:"text-truncate",type:"text",defaultValue:e.signature,readOnly:!0})]})]},"sig:".concat(e.signature))}))})]})}var Z=a(222);function Q(){var e=Object(n.useContext)(y).state,t=Object(n.useRef)(9),a=Object(n.useRef)(20),r=Object(n.useState)([[""]]),c=Object(l.a)(r,2),s=c[0],i=c[1];function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.current;return(null===e||void 0===e?void 0:e.length)>t?e.substr(0,t-1)+"...":e}function u(e,a,n){var r="";switch(e){case 0:a===Math.floor(t.current/2)&&(r=n?s[s.length-1][0]:o(s[s.length-1][0]));break;case 1:a===t.current/3-1?r=n?s[s.length-2][0]:o(s[s.length-2][0]):a===t.current/3*2&&(r=n?s[s.length-2][1]:o(s[s.length-2][1]));break;case 2:0===a?r=n?s[0][0]:o(s[0][0]):a===t.current/3-1?r=n?s[0][1]:o(s[0][1]):a===t.current/3*2?r=n?s[0][2]:o(s[0][2]):a===t.current-1&&(r=n?s[0][3]:o(s[0][3]))}return r}function d(e,a){var n="";switch(e){case 0:n=a===Math.floor(t.current/2)?"root-cell":"";break;case 1:a===t.current/3?n="diag-line-left":a===2*t.current/3-1&&(n="diag-line-right");break;case 2:var r=[t.current/3-1,2*t.current/3].includes(a);r&&s.length<=2?n="data-cells":r&&(n="middle-cells");break;case 3:1===a?n="diag-line-left":a===t.current-2&&4===s[0].length?n="diag-line-right":[t.current/3-1,t.current/3*2].includes(a)&&(n="normal-line");break;case 4:([0,t.current/3-1,t.current/3*2].includes(a)||t.current-1===a&&4===s[0].length)&&(n="data-cells")}return n}return Object(n.useEffect)((function(){function t(){return(t=Object(O.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G(e.verifiedTrans,e.selectedTrans);case 2:a=t.sent,i(a);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.selectedTrans,e.verifiedTrans]),Object(b.jsxs)("div",{className:"w-100 my-3 text-center",children:[Object(b.jsx)("h3",{className:"font-weight-bold",children:"Merkle Tree Visualization"}),""!==s[s.length-1][0]?Object(b.jsx)(Z.a,{className:"w-75 mx-auto my-1 text-center border",responsive:!0,size:"sm",children:Object(b.jsxs)("tbody",{children:[Object(b.jsx)("tr",{children:Array.from({length:t.current}).map((function(e,t){return Object(b.jsx)("td",{className:d(0,t),title:u(0,t,!0),children:u(0,t,!1)},"first-data-row-"+t)}))}),s.length>=2&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("tr",{children:Array.from({length:t.current}).map((function(e,t){return Object(b.jsx)("td",{className:d(1,t)},"first-break-row-"+t)}))}),Object(b.jsx)("tr",{children:Array.from({length:t.current}).map((function(e,t){return Object(b.jsx)("td",{className:d(2,t),title:u(1,t,!0),children:u(1,t,!1)},"second-data-row-"+t)}))})]}),3===s.length&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("tr",{children:Array.from({length:t.current}).map((function(e,t){return Object(b.jsx)("td",{className:d(3,t)},"second-break-row-"+t)}))}),Object(b.jsx)("tr",{children:Array.from({length:t.current}).map((function(e,t){return Object(b.jsx)("td",{className:d(4,t),title:u(2,t,!0),children:u(2,t,!1)},"third-data-row-"+t)}))})]})]})}):Object(b.jsx)("p",{className:"my-3 border w-75 mx-auto",children:"Please select a verified transaction from above..."})]})}function ee(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(j,{}),Object(b.jsx)(Y,{}),Object(b.jsxs)("div",{className:"container-fluid row d-flex justify-content-center mx-auto my-3",children:[Object(b.jsx)(Q,{}),Object(b.jsx)($,{chain:!1,index:0}),Object(b.jsx)(H,{chain:!1,index:0})]})]})}var te=function(e,t){switch(t.type){case x.ADD_VERIFIED_TRANS:var a=t.payload.trans,n=[].concat(Object(p.a)(e.verifiedTrans),[Object(P.a)({},a)]);return localStorage.setItem("verTrans",JSON.stringify(n,null,2)),Object(P.a)(Object(P.a)({},e),{},{verifiedTrans:n});case x.UPDATE_VERIFIED_TRANS:var r=e.selectedTrans.map((function(e){return e.signature})),c=e.verifiedTrans.filter((function(e){return!r.includes(e.signature)}));return localStorage.setItem("verTrans",JSON.stringify(c,null,2)),Object(P.a)(Object(P.a)({},e),{},{verifiedTrans:c});case x.UPDATE_SELECTED_TRANS:var s=t.payload.selectedTrans;return localStorage.setItem("selTrans",JSON.stringify(s,null,2)),Object(P.a)(Object(P.a)({},e),{},{selectedTrans:s});case x.UPDATE_USERS:var l=t.payload.users;return localStorage.setItem("users",JSON.stringify(l,null,2)),Object(P.a)(Object(P.a)({},e),{},{users:l});case x.SET_MAIN_USER:var i=t.payload.user;return localStorage.setItem("user",JSON.stringify(i,null,2)),Object(P.a)(Object(P.a)({},e),{},{user:i});case x.ADD_BLOCK:var o=t.payload.block,u=[].concat(Object(p.a)(e.chain),[Object(P.a)({},o)]);return localStorage.setItem("chain",JSON.stringify(u,null,2)),Object(P.a)(Object(P.a)({},e),{},{chain:u});case x.UPDATE_BLOCK:var d=t.payload.block,b=Array.isArray(d)?Object(p.a)(d):[d],j=Object(p.a)(e.chain);return b.forEach((function(e){return j[e.index]=Object(P.a)({},e)})),localStorage.setItem("chain",JSON.stringify(j,null,2)),Object(P.a)(Object(P.a)({},e),{},{chain:j});case x.UPDATE_PREVIEW:var m=t.payload.preview;return localStorage.setItem("preview",JSON.stringify(m,null,2)),Object(P.a)(Object(P.a)({},e),{},{preview:Object(P.a)({},m)});case x.ASSIGN_COPIED:var h=t.payload.copied;return localStorage.setItem("copied",h),Object(P.a)(Object(P.a)({},e),{},{copied:h});case x.SET_SIGNED:var O=t.payload,f=O.signed,v=O.sent,y=void 0!==v?v:!f,g=Object(P.a)(Object(P.a)({},e.wallet),{},{signed:f,sent:y});return localStorage.setItem("wallet",JSON.stringify(g,null,2)),Object(P.a)(Object(P.a)({},e),{},{wallet:g});case x.SET_VALIDATED:var S=t.payload.validated;return localStorage.setItem("wallet",JSON.stringify(Object(P.a)(Object(P.a)({},e.wallet),{},{validated:S}),null,2)),Object(P.a)(Object(P.a)({},e),{},{wallet:Object(P.a)(Object(P.a)({},e.wallet),{},{validated:S})});case x.SET_DETAILS:var T=t.payload.details;return localStorage.setItem("wallet",JSON.stringify(Object(P.a)(Object(P.a)({},e.wallet),{},{details:T}),null,2)),Object(P.a)(Object(P.a)({},e),{},{wallet:Object(P.a)(Object(P.a)({},e.wallet),{},{details:T})});default:return e}};a(215);function ae(){var e,t,a,r,c,s,u,d=Object(n.useReducer)(te,{verifiedTrans:null!==(e=JSON.parse(localStorage.getItem("verTrans")))&&void 0!==e?e:[],selectedTrans:null!==(t=JSON.parse(localStorage.getItem("selTrans")))&&void 0!==t?t:[],users:null!==(a=JSON.parse(localStorage.getItem("users")))&&void 0!==a?a:[],user:null!==(r=JSON.parse(localStorage.getItem("user")))&&void 0!==r?r:{publicKey:"",privateKey:"",balance:1e3},chain:null!==(c=JSON.parse(localStorage.getItem("chain")))&&void 0!==c?c:[{index:0,prevHash:"",currHash:new Array(64).fill("0").join(""),transactions:[],timestamp:Date.parse("31 Apr 2021 00:00:00 UTC"),merkleRoot:"",valid:!0}],copied:"",preview:null!==(s=JSON.parse(localStorage.getItem("preview")))&&void 0!==s?s:{index:1,prevHash:new Array(64).fill("0").join(""),currHash:"",transactions:[],timestamp:Date.parse("31 Apr 2021 00:00:00 UTC"),merkleRoot:"",valid:!1},wallet:null!==(u=JSON.parse(localStorage.getItem("wallet")))&&void 0!==u?u:{sent:!1,signed:!1,validated:!1,details:{from:"",to:"",amount:(0).toFixed(2),msg:"",signature:""}}}),j=Object(l.a)(d,2),x=j[0],m=j[1],h=Object(n.useMemo)((function(){return{state:x,dispatch:m}}),[x,m]);return Object(b.jsx)(i.a,{basename:"/LibraCoin",children:Object(b.jsxs)(y.Provider,{value:h,children:[Object(b.jsx)(o.b,{exact:!0,path:"/",children:Object(b.jsx)(o.a,{to:"/wallet"})}),Object(b.jsx)(o.b,{path:"/wallet",component:M}),Object(b.jsx)(o.b,{path:"/mine",component:ee}),Object(b.jsx)(o.b,{path:"/blockchain",component:X})]})})}a(217);s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(ae,{})}),document.getElementById("root"))},64:function(e,t,a){},69:function(e,t,a){}},[[218,1,2]]]);
//# sourceMappingURL=main.272641a7.chunk.js.map