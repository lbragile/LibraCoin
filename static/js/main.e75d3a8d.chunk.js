(this.webpackJsonplibracoin=this.webpackJsonplibracoin||[]).push([[0],{34:function(e,t,a){},44:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(20),s=a.n(r),l=a(9),i=a(38),o=a(6),u=a(62),d=a(64),j=(a(44),a(1));function b(){return Object(j.jsxs)(u.a,{bg:"none",expand:"lg",className:"mb-3",children:[Object(j.jsx)(u.a.Brand,{href:"https://github.com/lbragile/LibraCoin",children:Object(j.jsx)("img",{src:"./assets/libracoin-logo-256.png",alt:"LibraCoin Logo",width:"64"})}),Object(j.jsx)(u.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(j.jsx)(u.a.Collapse,{id:"basic-navbar-nav",children:Object(j.jsxs)(d.a,{className:"mr-auto",children:[Object(j.jsx)(d.a.Link,{href:"/LibraCoin/wallet",active:location.href.includes("/wallet"),children:"Wallet"}),Object(j.jsx)(d.a.Link,{href:"/LibraCoin/mine",active:location.href.includes("/mine"),children:"Mine"}),Object(j.jsx)(d.a.Link,{href:"/LibraCoin/blockchain",active:location.href.includes("/blockchain"),children:"Blockchain"})]})})]})}var x,O=a(26),h=a(7),p=a.n(h),m=a(12),f=a(60),v=a(63),y=n.a.createContext(void 0);function g(e,t,a){if(e.target.select(),e.target.setSelectionRange(0,1e6),document.execCommand("copy"),a){var c="public"===a;t([c,!c&&!e.target.value.includes("\u25e6")])}else t([!0])}function S(e){return Array.from(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join("")}function N(e){return C.apply(this,arguments)}function C(){return(C=Object(m.a)(p.a.mark((function e(t){var a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(new TextEncoder).encode(t),e.next=3,window.crypto.subtle.digest("SHA-256",a);case 3:return c=e.sent,e.abrupt("return",S(c));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e[e.ADD_VERIFIED_TRANS=0]="ADD_VERIFIED_TRANS",e[e.UPDATE_VERIFIED_TRANS=1]="UPDATE_VERIFIED_TRANS",e[e.UPDATE_SELECTED_TRANS=2]="UPDATE_SELECTED_TRANS",e[e.UPDATE_USERS=3]="UPDATE_USERS"}(x||(x={}));a(34);function k(){var e,t,a=Object(c.useContext)(y),n=a.state,r=a.dispatch,s=Object(c.useRef)(null),i=Object(c.useRef)(null),o=Object(c.useRef)(3),u=Object(c.useState)([!1,!1]),d=Object(l.a)(u,2),b=d[0],h=d[1];function N(e,t){return C.apply(this,arguments)}function C(){return(C=Object(m.a)(p.a.mark((function e(t,a){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey(t,a);case 2:return c=e.sent,e.abrupt("return",S(c));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(m.a)(p.a.mark((function e(){var t,a,c,l,o,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]);case 2:return t=e.sent,a=t.publicKey,c=t.privateKey,e.next=7,N("spki",a);case 7:return l=e.sent,e.next=10,N("pkcs8",c);case 10:o=e.sent,s.current&&i.current&&(s.current.innerText=l,i.current.innerText=new Array(o.length).fill("\u25e6").join("")),localStorage.setItem("user",JSON.stringify({publicKey:l,privateKey:o,balance:1e3})),u=[].concat(Object(O.a)(n.users),[{publicKey:l,balance:1e3}]),localStorage.setItem("users",JSON.stringify(u)),r({type:x.UPDATE_USERS,payload:{users:u}});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(j.jsxs)("div",{className:"row d-flex align-items-center justify-content-center",children:[!(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.publicKey)&&Object(j.jsx)(f.a,{variant:"primary",className:"p-3 mx-2 font-weight-bold",onClick:function(){return k.apply(this,arguments)},children:"Create Wallet"}),Object(j.jsxs)(v.a.Group,{className:"user-key col-5 px-0",children:[Object(j.jsx)(v.a.Label,{className:"mb-3",children:Object(j.jsx)("h3",{className:"mb-0",children:"Public Key:"})}),Object(j.jsx)(v.a.Control,{as:"textarea",rows:o.current,defaultValue:localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user")).publicKey,isValid:b[0],onFocus:function(e){return g(e,h,"public")},ref:s}),Object(j.jsx)(v.a.Control.Feedback,{type:"valid",children:"Copied to clipboard!"})]}),Object(j.jsxs)(v.a.Group,{className:"user-key col-5 px-0",children:[Object(j.jsx)(v.a.Label,{className:"mb-3",children:Object(j.jsxs)("h3",{className:"mb-0",children:["Private Key:"," ",(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.publicKey)&&Object(j.jsx)("span",{id:"private-reveal-eyes",onClick:function(){i.current&&(i.current.value.includes("\u25e6")?i.current.value=JSON.parse(localStorage.getItem("user")).privateKey:i.current.value=new Array(i.current.value.length).fill("\u25e6").join(""))},children:"\ud83d\udc40"})]})}),Object(j.jsx)(v.a.Control,{as:"textarea",rows:o.current,defaultValue:localStorage.getItem("user")?new Array(JSON.parse(localStorage.getItem("user")).privateKey.length).fill("\u25e6").join(""):"",onFocus:function(e){return g(e,h,"private")},isValid:b[1],ref:i}),Object(j.jsx)(v.a.Control.Feedback,{type:"valid",children:"Copied to clipboard!"})]})]})}var T=a(15),w=a(61);function V(e){return Object(j.jsxs)(v.a,{noValidate:!0,className:"col-5 trans-form",onSubmit:function(t){return e.handleSubmit(t)},children:[Object(j.jsxs)(v.a.Group,{children:[Object(j.jsx)(v.a.Control,{type:"text",defaultValue:e.details.to,disabled:!0}),Object(j.jsx)(v.a.Text,{className:"text-muted",children:"The receiver's public key"})]}),Object(j.jsx)(v.a.Group,{children:Object(j.jsxs)(w.a,{className:"mb-2",children:[Object(j.jsx)(v.a.Control,{type:"number",defaultValue:e.details.amount,disabled:!0}),Object(j.jsx)(w.a.Prepend,{children:Object(j.jsx)(w.a.Text,{children:"LC"})})]})}),Object(j.jsx)(v.a.Group,{children:Object(j.jsx)(v.a.Control,{as:"textarea",defaultValue:e.details.message,rows:5,placeholder:"optional message...",disabled:!0})}),Object(j.jsxs)(v.a.Group,{children:[Object(j.jsx)(v.a.Control,{type:"text",defaultValue:e.details.signature,disabled:!0}),Object(j.jsx)(v.a.Text,{className:"text-muted",children:"Transaction Signature \u2192 receiver uses this along with your public key to verify transaction."})]}),Object(j.jsx)(f.a,{variant:"primary",type:"submit",disabled:!e.validated,block:!0,children:Object(j.jsx)("b",{children:"Send"})})]})}function E(e){var t,a,c,n=e.validated,r=e.handleSubmit;return Object(j.jsxs)(v.a,{noValidate:!0,validated:n,className:"col-5 trans-form",onSubmit:r,children:[Object(j.jsxs)(v.a.Group,{children:[Object(j.jsx)(v.a.Control,{type:"text",defaultValue:(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.publicKey)||"",disabled:!0}),Object(j.jsx)(v.a.Text,{className:"text-muted",children:"Your public key \u2192 used to verify transaction was signed using your private key"}),Object(j.jsx)("h3",{className:"my-0 text-center",children:"\u2193"}),Object(j.jsx)(v.a.Control,{type:"text",placeholder:"Receiver's public key",pattern:"[A-Za-z0-9]{182,182}",required:!0}),Object(j.jsx)(v.a.Control.Feedback,{type:"invalid",children:"Must be of the same format as your public key"})]}),Object(j.jsx)(v.a.Group,{children:Object(j.jsxs)(w.a,{className:"mb-2",children:[Object(j.jsx)(v.a.Control,{type:"number",placeholder:"1.00",onBlur:function(e){return function(e){var t,a=(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.balance)||1e3;e.target.value=Math.min(Math.max(.1,+e.target.value),a).toFixed(2).toString()}(e)},required:!0}),Object(j.jsx)(w.a.Prepend,{children:Object(j.jsx)(w.a.Text,{children:"LC"})})]})}),Object(j.jsx)(v.a.Group,{children:Object(j.jsx)(v.a.Control,{as:"textarea",rows:2,placeholder:"optional message..."})}),Object(j.jsxs)(v.a.Group,{children:[Object(j.jsx)(v.a.Control,{type:"text",defaultValue:(null===(a=JSON.parse(localStorage.getItem("user")))||void 0===a?void 0:a.privateKey)||"",disabled:!0}),Object(j.jsx)(v.a.Text,{className:"text-muted",children:"Your private key \u2192 not shared with anyone, keep this secret!"})]}),Object(j.jsx)(f.a,{variant:"primary",type:"submit",disabled:!(null===(c=JSON.parse(localStorage.getItem("user")))||void 0===c?void 0:c.publicKey)||n,block:!0,children:Object(j.jsx)("b",{children:"Sign"})})]})}function I(){var e,t,a=Object(c.useContext)(y).state,n=Object(c.useState)(!1),r=Object(l.a)(n,2),s=r[0],i=r[1],o=Object(c.useState)(!1),u=Object(l.a)(o,2),d=u[0],b=u[1],x=Object(c.useRef)({to:"",from:null!==(e=null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.publicKey)&&void 0!==e?e:"",amount:void 0,message:"",signature:""}),h=function(){var e=Object(m.a)(p.a.mark((function e(t){var c,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c=t.currentTarget,i(!0),!c.checkValidity()||d){e.next=15;break}return n=Object(T.a)({},c),r=Object.values(n).slice(1,4).map((function(e){return e.value})),x.current.to=r[0],x.current.amount=r[1],x.current.message=r[2],e.next=11,N(JSON.stringify(x.current));case 11:x.current.signature=e.sent,b(!0),e.next=16;break;case 15:c.checkValidity()&&(localStorage.setItem("transactions",JSON.stringify([].concat(Object(O.a)(a.verifiedTrans),[x.current]))),b(!1),i(!1));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"container-fluid d-flex justify-content-center row mb-2",children:[Object(j.jsx)(E,{validated:s,handleSubmit:h}),Object(j.jsx)(V,{validated:s,setValidated:i,setSigned:b,handleSubmit:h,details:x.current})]})}function L(){var e,t=Object(c.useContext)(y).state,a=Object(c.useState)([!1]),n=Object(l.a)(a,2),r=n[0],s=n[1];return Object(j.jsx)("div",{children:Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:Object(j.jsx)("b",{children:"Users:"})}),Object(j.jsx)("div",{id:"list-background",children:null===(e=t.users)||void 0===e?void 0:e.map((function(e){return Object(j.jsxs)(v.a,{className:"item",children:[Object(j.jsxs)(v.a.Group,{children:[Object(j.jsx)(v.a.Label,{children:Object(j.jsx)("h5",{className:r?"my-0":"mt-1",children:"Public Key:"})}),Object(j.jsx)(v.a.Control,{type:"text",className:"text-truncate",onFocus:function(e){return g(e,s)},defaultValue:e.publicKey,isValid:r[0]}),Object(j.jsx)(v.a.Control.Feedback,{type:"valid",children:"Copied to clipboard"})]}),Object(j.jsxs)(v.a.Group,{children:[Object(j.jsx)(v.a.Label,{children:Object(j.jsx)("h5",{className:"my-0",children:"Balance:"})}),Object(j.jsxs)("p",{children:[e.balance.toFixed(2)," LC"]})]})]},Math.random())}))})]})})}function A(){return Object(j.jsxs)("div",{className:"container-fluid my-3",children:[Object(j.jsx)(b,{}),Object(j.jsx)(k,{}),Object(j.jsx)(I,{}),Object(j.jsx)(L,{})]})}function D(e){var t=Object(c.useContext)(y).state,a=Object(c.useRef)(),n=Object(c.useRef)(null);function r(){return(r=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Here");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(j.jsxs)("div",{className:e.chain?"bordered-background":"col-6 mx-3",children:[Object(j.jsxs)(v.a.Group,{children:[Object(j.jsx)(v.a.Label,{children:Object(j.jsx)("h5",{className:"my-0",children:"Nonce:"})}),Object(j.jsx)(v.a.Control,{type:"number",defaultValue:a.current,disabled:!0})]}),Object(j.jsxs)(v.a.Group,{children:[Object(j.jsx)(v.a.Label,{children:Object(j.jsx)("h5",{className:"my-0",children:"Block Header (Current):"})}),Object(j.jsx)(v.a.Control,{type:"number",disabled:!0})]}),Object(j.jsxs)(v.a.Group,{children:[Object(j.jsx)(v.a.Label,{children:Object(j.jsx)("h5",{className:"my-0",children:"Target:"})}),Object(j.jsx)(v.a.Control,{type:"text",disabled:!0})]}),Object(j.jsxs)(v.a.Group,{children:[Object(j.jsx)(v.a.Label,{children:Object(j.jsx)("h5",{className:"my-0",children:"Solution:"})}),Object(j.jsx)(v.a.Control,{type:"text",style:e.isValid?{color:"green"}:{color:"red"},defaultValue:e.solution,disabled:!0})]}),Object(j.jsx)(f.a,{variant:"primary",className:"btn-block d-block mt-3",disabled:e.isValid||0===t.selectedTrans.length,onClick:function(){return function(){return r.apply(this,arguments)}()},ref:n,children:Object(j.jsx)("h4",{className:"m-0",children:"Mine"})})]})}a(50);function R(e){var t,a=e.details,r=e.startValid,s=Object(c.useState)(""),i=Object(l.a)(s,2),o=i[0],u=i[1],d=Object(c.useState)(r),b=Object(l.a)(d,2),x=b[0],O=b[1],h=Object(c.useState)(!0),y=Object(l.a)(h,2),g=y[0],S=y[1],N=Object(c.useState)(null!==(t=null===a||void 0===a?void 0:a.timestamp)&&void 0!==t?t:Date.now()),C=Object(l.a)(N,2),k=C[0],T=C[1];function w(){return(w=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.target.value);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){T(Date.now())}),[o]),Object(j.jsxs)(n.a.Fragment,{children:[!a&&Object(j.jsx)(D,{chain:!1,setShowBtn:S,solution:o,setSolution:u,isValid:x,setIsValid:O}),Object(j.jsxs)("div",{className:"block "+(a?"col-12 ":"")+(x?"valid-block":"invalid-block"),children:[Object(j.jsxs)(v.a.Group,{children:[Object(j.jsx)(v.a.Label,{children:Object(j.jsx)("h5",{children:"Index:"})}),Object(j.jsx)(v.a.Control,{type:"number",defaultValue:null===a||void 0===a?void 0:a.index,disabled:!0})]}),Object(j.jsxs)(v.a.Group,{children:[Object(j.jsx)(v.a.Label,{children:Object(j.jsx)("h5",{children:"Timestamp:"})}),Object(j.jsx)(v.a.Control,{type:"number",value:!a||o?k:a.timestamp,disabled:!0})]}),Object(j.jsxs)(v.a.Group,{children:[Object(j.jsx)(v.a.Label,{children:Object(j.jsx)("h5",{children:"Previous Hash:"})}),Object(j.jsx)(v.a.Control,{type:"text",defaultValue:null===a||void 0===a?void 0:a.prevHash,disabled:!0})]}),Object(j.jsxs)(v.a.Group,{children:[Object(j.jsx)(v.a.Label,{children:Object(j.jsx)("h5",{children:"Current Hash:"})}),Object(j.jsx)(v.a.Control,{type:"text",value:!a||o?o:a.currHash,disabled:!0})]}),Object(j.jsxs)(v.a.Group,{children:[Object(j.jsx)(v.a.Label,{children:Object(j.jsx)("h5",{children:"Merkle Root:"})}),Object(j.jsx)(v.a.Control,{type:"text",value:0===(null===a||void 0===a?void 0:a.index)?"":"abc",disabled:a&&0===a.index,onChange:function(e){return function(e){return w.apply(this,arguments)}(e)}})]}),!a&&x&&g&&Object(j.jsx)(f.a,{variant:"success",block:!0,onClick:function(){S(!1)},children:Object(j.jsx)("h3",{className:"my-0 font-weight-bold",children:"+"})}),a&&Object(j.jsx)(D,{chain:!0,index:a.index,setShowBtn:S,solution:o,setSolution:u,isValid:x,setIsValid:O})]})]})}a(51);function G(){return Object(j.jsxs)("div",{children:[Object(j.jsx)(b,{}),Object(j.jsx)("div",{id:"blockchain",children:[].map((function(e){return Object(j.jsxs)("div",{className:"block-and-chain",children:[Object(j.jsx)(R,{details:e,startValid:!1}),Object(j.jsx)("div",{className:"chain",children:"\ud83d\udd17"})]},Math.random())}))})]})}a(52);function _(){var e=Object(c.useContext)(y),t=e.state,a=e.dispatch,n=Object(c.useState)([!1]),r=Object(l.a)(n,2),s=r[0],i=r[1];return Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:Object(j.jsx)("b",{children:"Verified Transactions:"})}),Object(j.jsx)("div",{id:"list-background",children:t.verifiedTrans.map((function(e){return Object(j.jsxs)("div",{className:"trans-item "+(t.selectedTrans.map((function(e){return e.signature})).includes(e.signature)?"selected":"not-selected"),onClick:function(){return function(e){var t=JSON.parse(localStorage.getItem("selectedTransactions"))||[];t.map((function(e){return e.signature})).includes(e.signature)?t=t.filter((function(t){return t.signature!==e.signature})):t.push(e),a({type:x.UPDATE_SELECTED_TRANS,payload:{selectedTrans:t}}),localStorage.setItem("selectedTransactions",JSON.stringify(t))}(e)},children:[Object(j.jsxs)(v.a.Group,{className:"mb-1 text-center",children:[Object(j.jsx)(v.a.Control,{type:"text",className:"text-truncate",defaultValue:e.from}),Object(j.jsx)("h3",{className:"my-0",children:"\u2193"}),Object(j.jsx)(v.a.Control,{type:"text",className:"text-truncate",defaultValue:e.to})]}),Object(j.jsxs)(v.a.Group,{className:"mb-1",children:[Object(j.jsx)(v.a.Label,{children:Object(j.jsx)("h5",{className:"my-0",children:"Message:"})}),Object(j.jsx)(v.a.Control,{as:"textarea",className:"text-truncate",defaultValue:e.message})]}),Object(j.jsxs)(v.a.Group,{className:"mb-1",children:[Object(j.jsx)(v.a.Label,{children:Object(j.jsx)("h5",{className:"my-0",children:"Amount:"})}),Object(j.jsx)(v.a.Control,{type:"number",className:"text-truncate",defaultValue:e.amount})]}),Object(j.jsxs)(v.a.Group,{className:"mb-1",children:[Object(j.jsx)(v.a.Label,{children:Object(j.jsx)("h5",{className:"my-0",children:"Signature:"})}),Object(j.jsx)(v.a.Control,{type:"text",className:"text-truncate",defaultValue:e.signature,onFocus:function(e){return g(e,i)},isValid:s[0]}),Object(j.jsx)(v.a.Control.Feedback,{type:"valid",children:"Copied to clipboard"})]})]},Math.random())}))})]})}function J(){return Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)(b,{}),Object(j.jsx)(_,{}),Object(j.jsx)("div",{className:"row d-flex justify-content-center align-items-center my-2 container-fluid",children:Object(j.jsx)(R,{startValid:!1})})]})}a(53),a(54);var K=function(e,t){switch(t.type){case x.UPDATE_VERIFIED_TRANS:var a=e.selectedTrans.map((function(e){return e.signature})),c=e.verifiedTrans.filter((function(e){return!a.includes(e.signature)}));return Object(T.a)(Object(T.a)({},e),{},{verifiedTrans:c});case x.UPDATE_SELECTED_TRANS:return Object(T.a)(Object(T.a)({},e),{},{selectedTrans:t.payload.selectedTrans});case x.UPDATE_USERS:return Object(T.a)(Object(T.a)({},e),{},{users:t.payload.users});default:return e}};function P(){var e,t,a,n=Object(c.useReducer)(K,{verifiedTrans:null!==(e=JSON.parse(localStorage.getItem("transactions")))&&void 0!==e?e:[],selectedTrans:null!==(t=JSON.parse(localStorage.getItem("selectedTransactions")))&&void 0!==t?t:[],users:null!==(a=JSON.parse(localStorage.getItem("users")))&&void 0!==a?a:[]}),r=Object(l.a)(n,2),s=r[0],u=r[1],d=Object(c.useMemo)((function(){return{state:s,dispatch:u}}),[s,u]);return Object(j.jsx)(i.a,{basename:"/LibraCoin",children:Object(j.jsxs)(y.Provider,{value:d,children:[Object(j.jsx)(o.b,{exact:!0,path:"/",children:Object(j.jsx)(o.a,{to:"/wallet"})}),Object(j.jsx)(o.b,{path:"/wallet",component:A}),Object(j.jsx)(o.b,{path:"/mine",component:J}),Object(j.jsx)(o.b,{path:"/blockchain",component:G})]})})}s.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(P,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.e75d3a8d.chunk.js.map