(this.webpackJsonplibracoin=this.webpackJsonplibracoin||[]).push([[8],{240:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return F}));var n=a(0),r=a.n(n),c=a(27),i=a(50),s=a(239),l=a(53),o=a.n(l),u=a(14),d=a(1),b=a(54),j=a(52),p=a(6),m=a(57);var O,x,h,f=a(26),y=a(13),g=a(12),v=a(56),S=Object(g.d)(i.a)(O||(O=Object(y.a)(["\n  margin: 0.25em 0.5em;\n  word-wrap: break-word;\n"]))),N=Object(g.d)(s.a)(x||(x=Object(y.a)(["\n  background-color: ",";\n  margin: 1em 0.5em;\n  padding: 1em;\n  width: 14rem;\n"])),v.a.DEFAULT_BACKGROUND),w=g.d.span(h||(h=Object(y.a)(["\n  &:hover {\n    cursor: pointer;\n  }\n"])));function A(e,t,a){e.value.includes("\u25e6")?e.blur():(e.select(),document.execCommand("copy"),a({type:p.a.ASSIGN_COPIED,payload:{copied:t}}))}function E(e){e({type:p.a.ASSIGN_COPIED,payload:{copied:""}})}var C=a(3);function K(){var e=Object(j.a)(),t=e.state,a=e.dispatch,r=Object(n.useRef)(3),l=Object(n.useState)(!1),O=Object(c.a)(l,2),x=O[0],h=O[1];return function(e,t){var a=Object(j.a)().dispatch;Object(n.useEffect)((function(){function n(){return(n=Object(b.a)(o.a.mark((function n(){var r,c,i,s,l,b;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==e){n.next=15;break}return n.next=3,window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]);case 3:return r=n.sent,c=r.publicKey,i=r.privateKey,n.next=8,Object(m.a)("spki",c);case 8:return s=n.sent,n.next=11,Object(m.a)("pkcs8",i);case 11:l=n.sent,b={publicKey:s,balance:"1000.00"},a({type:p.a.SET_MAIN_USER,payload:{user:Object(d.a)(Object(d.a)({},b),{},{privateKey:l})}}),a({type:p.a.UPDATE_USERS,payload:{users:[].concat(Object(u.a)(t),[b])}});case 15:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[a,e,t])}(t.user.publicKey,t.users),Object(C.jsxs)("div",{className:"container-fluid d-flex justify-content-center mx-auto row my-5",children:[Object(C.jsxs)(S,{className:"col-12 col-lg-8",children:[Object(C.jsx)(i.a.Prepend,{children:Object(C.jsx)(f.b,{children:"Public Key (PK)"})}),Object(C.jsx)(s.a.Control,{"aria-label":"publicKey",as:"textarea",rows:r.current,className:"rounded-right",value:t.user.publicKey,isValid:"walletPK"===t.copied,onFocus:function(e){return A(e.target,"walletPK",a)},onBlur:function(){return E(a)},readOnly:!0}),Object(C.jsx)(s.a.Control.Feedback,{type:"valid",children:"Copied to clipboard!"})]}),Object(C.jsxs)(S,{className:"col-12 col-lg-8",children:[Object(C.jsx)(i.a.Prepend,{children:Object(C.jsx)(f.b,{children:"Private Key (SK)"})}),Object(C.jsx)(s.a.Control,{"aria-label":"privateKey",as:"textarea",rows:r.current,value:x?t.user.privateKey:new Array(t.user.privateKey.length).fill("\u25e6").join(""),onFocus:function(e){return A(e.target,"walletSK",a)},onBlur:function(){return E(a)},isValid:"walletSK"===t.copied,readOnly:!0}),Object(C.jsx)(i.a.Append,{children:Object(C.jsx)(f.b,{className:"rounded-right",children:Object(C.jsx)(w,{onClick:function(){return h(!x)},children:"\ud83d\udc40"})})}),Object(C.jsx)(s.a.Control.Feedback,{type:"valid",children:"Copied to clipboard!"})]})]})}var D=a(234),R=a(237);var T=a(235);var _=function(e,t){return void 0===t||t>=e},L=function(e){var t=Number(e);return Math.floor(t)===t||!e||e.toString().split(".")[1].length<=2},k=function(e,t){return T.b().shape({to:T.c().min(e,(function(e){var t=e.min-e.value.length;return"Length is too short. Add ".concat(t," alphanumeric character").concat(1===t?"":"s")})).max(e,(function(e){var t=e.value.length-e.max;return"Length is too long. Remove ".concat(t," alphanumeric character").concat(1===t?"":"s")})).matches(new RegExp("[A-Za-z0-9]{".concat(e,"}")),"Format is invalid, characters must be alphanumeric").required("Receiver Public Key is required!"),amount:T.a().test("negative","Cannot be a negative value",(function(e){return _(0,e)})).test("min","Must be at least $0.10 LC",(function(e){return _(.1,e)})).test("format","Allowed at most 2 decimal places",L).max(t,"Must be at most $".concat((a=t,a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))," LC")).required("Amount is required!"),msg:T.c().optional()});var a},I=a(77);function P(){var e=Object(j.a)(),t=e.state,a=e.dispatch;!function(e){var t=Object(j.a)().dispatch;Object(n.useEffect)((function(){t({type:p.a.SET_VALIDATED,payload:{validated:!1}}),t({type:p.a.SET_SIGNED,payload:{signed:!1,sent:!1}}),t({type:p.a.SET_DETAILS,payload:{details:{from:e,to:"",amount:"0.00",msg:"",signature:""}}})}),[t,e])}(t.user.publicKey);var r=function(e){return Object(C.jsx)(s.a.Control,Object(d.a)({as:"textarea"},e))};return Object(C.jsx)(D.c,{validationSchema:k(t.user.publicKey.length,t.user.balance),onSubmit:function(){var e=Object(b.a)(o.a.mark((function e(n,r){var c,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=r.setSubmitting)(!0),i=Object.values(n).reduce((function(e,t){return e+t}),""),e.t0=d.a,e.t1=Object(d.a)({},n),e.t2={},e.t3=t.user.publicKey,e.next=9,Object(m.b)(i);case 9:e.t4=e.sent,e.t5={from:e.t3,signature:e.t4},s=(0,e.t0)(e.t1,e.t2,e.t5),a({type:p.a.SET_SIGNED,payload:{signed:!0}}),a({type:p.a.SET_DETAILS,payload:{details:s}}),c(!1);case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),initialValues:{to:"",amount:"",msg:""},children:function(e){var a=e.handleSubmit,n=e.isSubmitting,c=e.touched,l=e.errors;return Object(C.jsxs)(I.a,{"aria-label":"Sign Form",noValidate:!0,className:"col-12 col-lg-5",onSubmit:a,children:[Object(C.jsxs)(i.a,{children:[Object(C.jsx)(i.a.Prepend,{children:Object(C.jsx)(f.b,{children:"Sender Public Key"})}),Object(C.jsx)(s.a.Control,{"aria-label":"Sender Public Key",name:"from",className:"text-truncate rounded-right",type:"text",value:t.user.publicKey,readOnly:!0})]}),Object(C.jsx)(s.a.Text,{className:"text-light",children:"Used to verify transaction was signed using your private key"}),Object(C.jsxs)(i.a,{className:"my-2",children:[Object(C.jsx)(i.a.Prepend,{children:Object(C.jsx)(f.b,{children:"Receiver Public Key"})}),Object(C.jsx)(D.b,{as:s.a.Control,"aria-label":"Receiver PK",name:"to",className:"text-truncate rounded-right",type:"text",required:!0,readOnly:t.wallet.signed,isInvalid:!!c.to&&!!l.to,isValid:!!c.to&&!l.to}),Object(C.jsx)(D.a,{name:"to",render:function(e){return Object(C.jsx)(s.a.Control.Feedback,{className:"font-weight-bold",type:"invalid",role:"alert","aria-label":"Receiver PK Feedback",children:e})}})]}),Object(C.jsxs)(i.a,{className:"mb-2",children:[Object(C.jsx)(D.b,{as:s.a.Control,"aria-label":"Sign Amount",name:"amount",type:"number",step:"any",placeholder:1..toFixed(2),required:!0,readOnly:t.wallet.signed,isInvalid:!!c.amount&&!!l.amount,isValid:!!c.amount&&!l.amount}),Object(C.jsx)(i.a.Append,{children:Object(C.jsx)(f.b,{className:"rounded-right border-left-0",children:"LC"})}),Object(C.jsx)(D.a,{name:"amount",render:function(e){return Object(C.jsx)(s.a.Control.Feedback,{className:"font-weight-bold",type:"invalid",role:"alert","aria-label":"Amount Feedback",children:e})}})]}),Object(C.jsxs)(i.a,{className:"mb-2",children:[Object(C.jsx)(i.a.Prepend,{children:Object(C.jsx)(f.b,{children:"Message"})}),Object(C.jsx)(D.b,{as:r,"aria-label":"Sign Message",name:"msg",rows:2,placeholder:"optional message...",readOnly:t.wallet.signed,isValid:!!c.msg&&!l.msg})]}),Object(C.jsxs)(i.a,{children:[Object(C.jsx)(i.a.Prepend,{children:Object(C.jsx)(f.b,{children:"Sender Private Key"})}),Object(C.jsx)(s.a.Control,{"aria-label":"Sender Private Key",name:"fromSK",className:"text-truncate",type:"text",value:t.user.privateKey,readOnly:!0})]}),Object(C.jsx)(s.a.Text,{className:"text-light",children:"Not shared with anyone, keep this secret!"}),Object(C.jsx)(R.a,{"aria-label":"Sign Button",className:"mt-2",variant:t.wallet.signed?"success":"primary",type:"submit",disabled:t.wallet.signed||n,block:!0,children:Object(C.jsx)("b",{children:t.wallet.signed?"Signed":"Sign"})})]})}})}function U(){var e=Object(j.a)(),t=e.state,a=e.dispatch;return Object(C.jsxs)(I.a,{"aria-label":"Send Form",noValidate:!0,className:"col-12 col-lg-5 my-2 my-lg-0",onSubmit:function(e){e.preventDefault(),a({type:p.a.SET_SIGNED,payload:{signed:!1}}),a({type:p.a.SET_VALIDATED,payload:{validated:!1}}),a({type:p.a.ADD_VERIFIED_TRANS,payload:{trans:t.wallet.details}}),a({type:p.a.SET_DETAILS,payload:{details:{from:"",to:"",amount:(0).toFixed(2),msg:"",signature:""}}})},children:[Object(C.jsxs)(i.a,{children:[Object(C.jsx)(i.a.Prepend,{children:Object(C.jsx)(f.b,{children:"Receiver Public Key"})}),Object(C.jsx)(s.a.Control,{"aria-label":"Receiver PK",name:"receiver-pk",className:"text-truncate",type:"text",value:t.wallet.details.to,readOnly:!0})]}),Object(C.jsx)(s.a.Text,{className:"text-light",children:"Make sure this matches the value used when signing"}),Object(C.jsxs)(i.a,{className:"my-2",children:[Object(C.jsx)(s.a.Control,{"aria-label":"Send Amount",name:"amount",type:"number",value:t.wallet.details.amount,readOnly:!0}),Object(C.jsx)(i.a.Append,{children:Object(C.jsx)(f.b,{className:"rounded-right border-left-0",children:"LC"})})]}),Object(C.jsxs)(i.a,{className:"mb-2",children:[Object(C.jsx)(i.a.Prepend,{children:Object(C.jsx)(f.b,{children:"Message"})}),Object(C.jsx)(s.a.Control,{"aria-label":"Send Message",name:"msg",as:"textarea",value:t.wallet.details.msg,rows:4,placeholder:"optional message...",readOnly:!0})]}),Object(C.jsxs)(i.a,{children:[Object(C.jsx)(i.a.Prepend,{children:Object(C.jsx)(f.b,{children:"Transaction Signature"})}),Object(C.jsx)(s.a.Control,{"aria-label":"Transaction Signature",name:"sig",type:"text",className:"text-truncate",value:t.wallet.details.signature,readOnly:!0})]}),Object(C.jsx)(s.a.Text,{className:"text-light",children:"Receiver uses this along with your public key to verify transaction"}),Object(C.jsx)(R.a,{"aria-label":"Send Button",className:"mt-2",variant:t.wallet.sent?"success":"primary",type:"submit",disabled:!t.wallet.signed,block:!0,children:Object(C.jsx)("b",{children:t.wallet.sent?"Sent":"Send"})})]})}function V(){var e=Object(j.a)(),t=e.state,a=e.dispatch;return Object(C.jsxs)("div",{className:"container-fluid mb-2",children:[Object(C.jsx)("h3",{className:"font-weight-bold",children:"Users"}),Object(C.jsx)("div",{className:"row flex-nowrap overflow-auto bg-dark mx-1 px-2 rounded",children:t.users.map((function(e,n){return Object(C.jsxs)(N,{className:"rounded flex-shrink-0",children:[Object(C.jsxs)(i.a,{children:[Object(C.jsx)(i.a.Prepend,{children:Object(C.jsx)(f.b,{children:"\ud83d\udd11"})}),Object(C.jsx)(s.a.Control,{"aria-label":"User Public Key",type:"text",className:"text-truncate rounded-right",onFocus:function(e){return A(e.target,"userItem-"+n,a)},onBlur:function(){return E(a)},defaultValue:e.publicKey,isValid:t.copied==="userItem-"+n,readOnly:!0}),Object(C.jsx)(s.a.Control.Feedback,{type:"valid",children:"Copied to clipboard"})]}),Object(C.jsxs)(i.a,{className:"mt-2",children:[Object(C.jsx)(s.a.Control,{"aria-label":"balance",type:"number",defaultValue:e.balance,disabled:!0}),Object(C.jsx)(i.a.Append,{children:Object(C.jsx)(f.b,{children:"LC"})})]})]},"user-".concat(e.publicKey))}))})]})}function F(){return Object(C.jsxs)(r.a.Fragment,{children:[Object(C.jsx)(K,{}),Object(C.jsxs)("div",{className:"container-fluid d-flex justify-content-center mx-auto row my-4",children:[Object(C.jsx)(P,{}),Object(C.jsx)(U,{})]}),Object(C.jsx)(V,{})]})}},52:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),r=a(29);function c(){var e=Object(n.useContext)(r.a);return{state:e.state,dispatch:e.dispatch}}},56:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e.DEFAULT_BACKGROUND="#fff",e.DARK_BACKGROUND="#1f1f1f",e.VALID_BACKGROUND="#b4ff9a",e.INVALID_BACKGROUND="#ff9a9a",e.VALID_SOLUTION="#008000",e.INVALID_SOLUTION="#f00",e.NAVBAR_BACKGROUND="#eee",e.NAV_LINK_UNDERSCORE="#8ac0ff",e.NAV_TEXT="#000",e.SELECTED_TRANS_BACKGROUND="#dfd",e.SELECTED_TRANS_BORDER="#090",e.ROOT_CELL="#4f9249",e.MIDDLE_CELLS="#cf8b31",e.DATA_CELLS="#7d95ff",e.PREVIEW_LINES="#777"}(n||(n={}))},57:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return b}));var n=a(53),r=a.n(n),c=a(54),i=a(82);function s(e){return Array.from(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join("")}function l(e,t){return o.apply(this,arguments)}function o(){return(o=Object(c.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey(t,a);case 2:return n=e.sent,e.abrupt("return",s(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(new i.TextEncoder).encode(t),e.next=3,window.crypto.subtle.digest("SHA-256",a);case 3:return n=e.sent,e.abrupt("return",s(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return s(window.crypto.getRandomValues(new Uint32Array(e)))}},77:function(e,t,a){"use strict";a.d(t,"c",(function(){return b})),a.d(t,"b",(function(){return j})),a.d(t,"a",(function(){return p}));var n,r,c,i,s=a(13),l=a(239),o=a(12),u=a(56),d=function(e,t,a,r){return Object(o.c)(n||(n=Object(s.a)(["\n  margin: ",";\n  padding: ",";\n  border-radius: ",";\n  border: ",";\n"])),e,t,a,r)},b=o.d.div(r||(r=Object(s.a)(["\n  min-height: 18rem;\n"]))),j=Object(o.d)(l.a)(c||(c=Object(s.a)(["\n  ","; /* stylelint-disable-line */\n  min-width: 14rem;\n  background-color: ",";\n\n  &:hover {\n    cursor: pointer;\n    border: 2px solid ",";\n  }\n"])),d("0.5rem","0.5em","5px","2px solid transparent"),(function(e){return e.theme.selected?u.a.SELECTED_TRANS_BACKGROUND:u.a.DEFAULT_BACKGROUND}),u.a.SELECTED_TRANS_BORDER),p=Object(o.d)(l.a)(i||(i=Object(s.a)(["\n  ","; /* stylelint-disable-line */\n  background-color: ",";\n"])),d("0 1rem","1em","6px","1px solid black"),u.a.DARK_BACKGROUND)}}]);
//# sourceMappingURL=8.5ed07598.chunk.js.map