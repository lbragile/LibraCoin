(this.webpackJsonplibracoin=this.webpackJsonplibracoin||[]).push([[0],{47:function(e,t,a){},60:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),s=a.n(c),i=a(53),l=a(9),o=a(7),u=a.n(o),j=a(43),d=a(10),b=a(8),h=a(77),x=a(79),O=a(81),p=a(80),f=(a(60),a(1));function m(){return Object(f.jsxs)(O.a,{bg:"none",expand:"lg",className:"mb-3",children:[Object(f.jsx)(O.a.Brand,{href:"https://github.com/lbragile/LibraCoin",children:Object(f.jsx)("img",{src:"./assets/libracoin-logo-256.png",alt:"LibraCoin Logo",width:"64"})}),Object(f.jsx)(O.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(f.jsx)(O.a.Collapse,{id:"basic-navbar-nav",children:Object(f.jsxs)(p.a,{className:"mr-auto",children:[Object(f.jsx)(p.a.Link,{href:"/LibraCoin/wallet",active:location.href.includes("/wallet"),children:"Wallet"}),Object(f.jsx)(p.a.Link,{href:"/LibraCoin/mine",active:location.href.includes("/mine"),children:"Mine"}),Object(f.jsx)(p.a.Link,{href:"/LibraCoin/blockchain",active:location.href.includes("/blockchain"),children:"Blockchain"})]})})]})}var v=a(31),y=a(24),g=a(41),k=a(13),S=a(32),w=function e(t,a,n,r){Object(y.a)(this,e),this.index=void 0,this.prevHash=void 0,this.currHash=void 0,this.transactions=void 0,this.timestamp=Date.now(),this.index=t,this.prevHash=a,this.currHash=n,this.transactions=r},C=function e(t,a,n,r){Object(y.a)(this,e),this.amount=void 0,this.from=void 0,this.to=void 0,this.message=void 0,this.amount=t,this.from=a,this.to=n,this.message=r},N=Object(S.a)("chain"),T=Object(S.a)("verifiedTransactions"),L=Object(S.a)("BLOCK_LIMIT"),V=Object(S.a)("users"),I=function(){function e(t){Object(y.a)(this,e),Object.defineProperty(this,N,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:void 0}),Object.defineProperty(this,L,{writable:!0,value:2}),Object.defineProperty(this,V,{writable:!0,value:void 0});var a={type:"public",extractable:!0,algorithm:{name:"ECDSA"},usages:["verify"]},n=[new C(0,a,a)],r=Array(64).fill("0").join("");Object(k.a)(this,N)[N]=null!==t&&void 0!==t?t:[new w(0,"",r,n)],Object(k.a)(this,T)[T]=[],Object(k.a)(this,V)[V]=[]}return Object(g.a)(e,[{key:"blockChain",get:function(){return Object(k.a)(this,N)[N]}},{key:"lastBlock",get:function(){return Object(k.a)(this,N)[N][Object(k.a)(this,N)[N].length-1]}},{key:"addUser",value:function(e){Object(k.a)(this,V)[V].push(e)}},{key:"randomHash",value:function(t){return e.bufferToHex(window.crypto.getRandomValues(new Uint32Array(t)))}},{key:"digestMessage",value:function(){var t=Object(d.a)(u.a.mark((function t(a){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(new TextEncoder).encode(a),t.next=3,window.crypto.subtle.digest("SHA-256",n);case 3:return r=t.sent,t.abrupt("return",e.bufferToHex(r));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"createTarget",value:function(){var t=Object(d.a)(u.a.mark((function t(a){var n,r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.digestMessage(e.instance.randomHash(20));case 2:return n=t.sent,r=new RegExp("^.{0,".concat(a,"}"),"g"),c=Array(a).fill("0").join(""),t.abrupt("return",n.replace(r,c));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"mine",value:function(){var e=Object(d.a)(u.a.mark((function e(t,a,n,r){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c="";case 1:if(!(t<=Number.MAX_SAFE_INTEGER)){e.next=12;break}return e.next=4,this.digestMessage(t.toString());case 4:if(c=e.sent,r(c),!c.substr(0,a).split("").every((function(e){return"0"===e}))){e.next=9;break}return e.abrupt("break",12);case 9:n(t++),e.next=1;break;case 12:return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"verifyTransaction",value:function(){var t=Object(d.a)(u.a.mark((function t(a,n){var r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.stringToArrayBuffer(JSON.stringify(a)),t.next=3,crypto.subtle.verify({name:"ECDSA",hash:"SHA-256"},a.from,n,r);case 3:return(c=t.sent)&&(Object(k.a)(this,T)[T].push(a),console.log("\u2705 Verified Transaction!"),console.log("Transaction Pool Now Has ".concat(Object(k.a)(this,T)[T].length," Verified Transactions"))),Object(k.a)(this,T)[T].length===Object(k.a)(this,L)[L]&&(this.addBlock("",Object(k.a)(this,T)[T]),Object(k.a)(this,T)[T]=[]),t.abrupt("return",c);case 7:case"end":return t.stop()}}),t,this)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"addBlock",value:function(e,t){var a=new w(this.lastBlock.index+1,this.lastBlock.currHash,e,t);Object(k.a)(this,N)[N].push(a),localStorage.setItem("chain",JSON.stringify(this.blockChain))}}],[{key:"stringToArrayBuffer",value:function(e){for(var t=new ArrayBuffer(2*e.length),a=new Uint16Array(t),n=0,r=e.length;n<r;n++)a[n]=e.charCodeAt(n);return t}},{key:"bufferToHex",value:function(e){return Array.from(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join("")}}]),e}();I.instance=new I(JSON.parse(localStorage.getItem("chain")));var H=a(78),K=a(76);function M(e){return Object(f.jsx)("div",{children:Object(f.jsxs)(H.a,{show:e.show,validated:e.validated.toString(),centered:!0,backdrop:"static",onHide:function(){e.setShow(!1),e.setSigned(!1),e.setValidated(!1)},animation:!1,children:[Object(f.jsx)(H.a.Header,{closeButton:!0,children:Object(f.jsx)("h4",{children:"LibraCoin Transaction (Send)"})}),Object(f.jsx)(H.a.Body,{children:Object(f.jsxs)(x.a,{noValidate:!0,onSubmit:e.handleSubmit,children:[Object(f.jsxs)(x.a.Group,{controlId:"SendTo",children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("b",{children:"To:"})}),Object(f.jsx)(x.a.Control,{type:"text",defaultValue:e.details.to,disabled:!0})]}),Object(f.jsxs)(x.a.Group,{controlId:"SendAmount",children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("b",{children:"Amount:"})}),Object(f.jsxs)(K.a,{className:"mb-2",children:[Object(f.jsx)(x.a.Control,{type:"text",defaultValue:e.details.amount,disabled:!0}),Object(f.jsx)(K.a.Prepend,{children:Object(f.jsx)(K.a.Text,{children:"LC"})})]})]}),Object(f.jsxs)(x.a.Group,{controlId:"TransMessage",children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("b",{children:"Message:"})}),Object(f.jsx)(x.a.Control,{as:"textarea",defaultValue:e.details.message,rows:3,disabled:!0})]}),Object(f.jsxs)(x.a.Group,{controlId:"SendSignature",children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("b",{children:"Signature:"})}),Object(f.jsx)(x.a.Control,{type:"text",defaultValue:e.details.signature,disabled:!0}),Object(f.jsx)(x.a.Text,{className:"text-muted",children:"Receiver uses this along with your public key to verify transaction."})]}),Object(f.jsx)(h.a,{variant:"primary",type:"submit",block:!0,children:Object(f.jsx)("b",{children:"Send"})})]})})]})})}function G(e){var t,a;return Object(f.jsx)("div",{children:Object(f.jsxs)(H.a,{show:e.show,centered:!0,backdrop:"static",onHide:function(){return e.setShow(!1)},animation:!1,children:[Object(f.jsx)(H.a.Header,{closeButton:!0,children:Object(f.jsx)("h4",{children:"LibraCoin Transaction (Sign)"})}),Object(f.jsx)(H.a.Body,{children:Object(f.jsxs)(x.a,{noValidate:!0,validated:e.validated,onSubmit:e.handleSubmit,children:[Object(f.jsxs)(x.a.Group,{controlId:"TransFrom",children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("b",{children:"From:"})}),Object(f.jsx)(x.a.Control,{type:"text",defaultValue:(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.publicKey)||""}),Object(f.jsx)(x.a.Text,{className:"text-muted",children:"Your public key \u2192 used to verify transaction was signed using your private key"})]}),Object(f.jsxs)(x.a.Group,{controlId:"TransTo",children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("b",{children:"To:"})}),Object(f.jsx)(x.a.Control,{type:"text",pattern:"[A-Za-z0-9]{182,182}",required:!0}),Object(f.jsx)(x.a.Control.Feedback,{type:"invalid",children:"Must be of the same format as your public key"})]}),Object(f.jsxs)(x.a.Group,{controlId:"TransAmount",children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("b",{children:"Amount:"})}),Object(f.jsxs)(K.a,{className:"mb-2",children:[Object(f.jsx)(x.a.Control,{type:"text",placeholder:"1.00",onBlur:function(e){return function(e){var t,a=(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.balance)||1e3;e.target.value=Math.min(Math.max(.1,+e.target.value),a).toFixed(2).toString()}(e)},required:!0}),Object(f.jsx)(K.a.Prepend,{children:Object(f.jsx)(K.a.Text,{children:"LC"})})]})]}),Object(f.jsxs)(x.a.Group,{controlId:"TransMessage",children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("b",{children:"Message:"})}),Object(f.jsx)(x.a.Control,{as:"textarea",placeholder:"optional message...",rows:3})]}),Object(f.jsxs)(x.a.Group,{controlId:"TransPrivate",children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("b",{children:"Private Key:"})}),Object(f.jsx)(x.a.Control,{type:"text",defaultValue:(null===(a=JSON.parse(localStorage.getItem("user")))||void 0===a?void 0:a.privateKey)||"",required:!0}),Object(f.jsx)(x.a.Text,{className:"text-muted",children:"This is not shared with anyone, keep this secret!"})]}),Object(f.jsx)(h.a,{variant:"primary",type:"submit",block:!0,children:Object(f.jsx)("b",{children:"Sign"})})]})})]})})}function A(){var e,t,a=Object(n.useState)(!1),r=Object(b.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(!1),l=Object(b.a)(i,2),o=l[0],h=l[1],x=Object(n.useState)(!1),O=Object(b.a)(x,2),p=O[0],m=O[1],y=Object(n.useRef)({to:"",from:null!==(e=null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.publicKey)&&void 0!==e?e:"",amount:0,message:"",signature:""}),g=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=t.currentTarget,h(!0),!a.checkValidity()||p){e.next=15;break}return n=Object(v.a)({},a),r=Object.values(n).slice(1,4).map((function(e){return e.value})),y.current.to=r[0],y.current.amount=+r[1],y.current.message=r[2],e.next=11,I.instance.digestMessage(JSON.stringify(y.current));case 11:y.current.signature=e.sent,m(!0),e.next=16;break;case 15:a.checkValidity()&&(c=JSON.parse(localStorage.getItem("transactions"))||[],localStorage.setItem("transactions",JSON.stringify([].concat(Object(j.a)(c),[y.current]))),s(!1),m(!1),h(!1));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{className:"font-weight-bold btn btn-info p-3 my-5",onClick:function(){return s(!0)},children:"Make Transaction"}),p?Object(f.jsx)(M,{show:c,setShow:s,validated:o,setValidated:h,setSigned:m,handleSubmit:g,details:y.current}):Object(f.jsx)(G,{show:c,setShow:s,validated:o,handleSubmit:g})]})}a(47);function J(e){var t=e.details,a=e.title,r=e.show,c=e.setShow,s=e.showUserDetails,i=e.copied,l=e.copyPublicKey,o=Object(n.useRef)({index:0,to:"",from:"",amount:0,message:"",signature:""});return Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:Object(f.jsxs)("b",{children:[a,":"]})}),Object(f.jsx)("div",{id:"list-background",children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(f.jsx)("div",{className:"item item-trans ml-3 col-1",onClick:function(){return s(e,t,o)},children:Object(f.jsx)("p",{className:"item-index-text",children:Object(f.jsx)("b",{children:t})})},Math.random())}))})]}),Object(f.jsxs)(H.a,{show:r,centered:!0,onHide:function(){return c(!1)},animation:!1,children:[Object(f.jsx)(H.a.Header,{closeButton:!0,children:Object(f.jsxs)(H.a.Title,{children:[a," #",o.current.index," Details"]})}),Object(f.jsx)(H.a.Body,{children:Object(f.jsxs)("div",{children:[Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"From:"})}),Object(f.jsx)(x.a.Control,{type:"text",className:"text-truncate",defaultValue:o.current.from})]}),Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"To:"})}),Object(f.jsx)(x.a.Control,{type:"text",className:"text-truncate",defaultValue:o.current.to})]}),Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"Message:"})}),Object(f.jsx)(x.a.Control,{as:"textarea",className:"text-truncate",defaultValue:o.current.message})]}),Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"Amount:"})}),Object(f.jsx)(x.a.Control,{type:"number",className:"text-truncate",defaultValue:o.current.amount})]}),Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"Signature:"})}),Object(f.jsx)(x.a.Control,{type:"text",className:"text-truncate",defaultValue:o.current.signature,onFocus:function(e){return l(e)},isValid:i}),Object(f.jsx)(x.a.Control.Feedback,{type:"valid",children:"Copied to clipboard"})]})]})})]})]})}function B(e){var t=e.details,a=e.title,n=e.copied,r=e.copyPublicKey;return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:Object(f.jsxs)("b",{children:[a,":"]})}),Object(f.jsx)("div",{id:"list-background",children:null===t||void 0===t?void 0:t.map((function(e){return Object(f.jsxs)(x.a,{className:"item",children:[Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{className:n?"my-0":"mt-1",children:"Public Key:"})}),Object(f.jsx)(x.a.Control,{type:"text",className:"text-truncate",onFocus:function(e){return r(e)},defaultValue:e.publicKey,isValid:n}),Object(f.jsx)(x.a.Control.Feedback,{type:"valid",children:"Copied to clipboard"})]}),Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{className:"my-0",children:"Balance:"})}),Object(f.jsxs)("p",{children:[e.balance.toFixed(2)," LC"]})]})]},Math.random())}))})]})})}function P(e){var t=e.details,a=e.title,r=Object(n.useState)(!1),c=Object(b.a)(r,2),s=c[0],i=c[1],l=Object(n.useState)(!1),o=Object(b.a)(l,2),u=o[0],j=o[1];function d(e){e.target.select(),e.target.setSelectionRange(0,1e6),document.execCommand("copy"),j(!0)}return Object(f.jsx)("div",{children:Object(f.jsx)("div",{children:a.toLowerCase().includes("user")?Object(f.jsx)(B,{details:t,title:a,copied:u,copyPublicKey:d}):Object(f.jsx)(J,{details:t,title:a,show:s,setShow:i,showUserDetails:function(e,t,a){a.current=Object(v.a)(Object(v.a)({},e),{},{index:t}),i(!0)},copied:u,copyPublicKey:d})})})}var F=function(){function e(){Object(y.a)(this,e),this.publicKey=void 0,this.privateKey=void 0,this.balance=void 0,this.publicKey={type:"public",extractable:!0,algorithm:{name:"ECDSA"},usages:["verify"]},this.privateKey={type:"private",extractable:!0,algorithm:{name:"ECDSA"},usages:["sign"]},this.balance=1e3}return Object(g.a)(e,[{key:"initialize",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]);case 2:t=e.sent,this.publicKey=t.publicKey,this.privateKey=t.privateKey;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMessageEncoding",value:function(e){return(new TextEncoder).encode(e)}},{key:"sendMoney",value:function(){var e=Object(d.a)(u.a.mark((function e(t,a,n){var r,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<=this.balance)){e.next=12;break}return r=new C(t,this.publicKey,a,n),c=I.stringToArrayBuffer(JSON.stringify(r)),e.next=5,window.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},this.privateKey,c);case 5:return s=e.sent,e.next=8,I.instance.verifyTransaction(r,s);case 8:e.sent?this.balance-=t:alert("Invalid transaction!"),e.next=13;break;case 12:alert("Your balance is not high enough to cover this transaction.");case 13:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()}],[{key:"CryptoKeyToHex",value:function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey(t,a);case 2:return n=e.sent,e.abrupt("return",I.bufferToHex(n));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}();a(65);function E(){var e,t,a=Object(n.useRef)(null),r=Object(n.useRef)(null),c=Object(n.useState)([!1,!1]),s=Object(b.a)(c,2),i=s[0],l=s[1],o=Object(n.useState)(localStorage.getItem("users")?JSON.parse(localStorage.getItem("users")):[]),O=Object(b.a)(o,2),p=O[0],v=O[1],y=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new F,e.next=3,t.initialize();case 3:return e.next=5,F.CryptoKeyToHex("spki",t.publicKey);case 5:return n=e.sent,e.next=8,F.CryptoKeyToHex("pkcs8",t.privateKey);case 8:c=e.sent,a.current&&r.current&&(a.current.innerText=n,r.current.innerText=new Array(c.length).fill("\u25e6").join("")),s=[].concat(Object(j.a)(p),[{publicKey:n,balance:t.balance}]),localStorage.setItem("user",JSON.stringify({publicKey:n,privateKey:c,balance:t.balance})),localStorage.setItem("users",JSON.stringify(s)),v(s);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function g(e,t){e.target.select(),e.target.setSelectionRange(0,99999),document.execCommand("copy");var a="public"===t;l([a,!a&&!e.target.value.includes("\u25e6")])}return Object(f.jsxs)("div",{className:"container-fluid my-3",children:[Object(f.jsx)(m,{}),Object(f.jsxs)("div",{className:"row",children:[(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.publicKey)?Object(f.jsx)("div",{className:"col-1"}):Object(f.jsx)("div",{className:"col-2",children:Object(f.jsx)(h.a,{variant:"primary",className:"p-3 font-weight-bold",onClick:y,children:"Create Wallet"})}),Object(f.jsx)("div",{className:"col-5",children:Object(f.jsxs)("div",{className:"user-key",children:[Object(f.jsx)("h3",{className:"mb-3",children:"Public Key:"}),Object(f.jsx)(x.a.Control,{as:"textarea",rows:7,className:"userKey",defaultValue:localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user")).publicKey,isValid:i[0],onFocus:function(e){return g(e,"public")},ref:a}),Object(f.jsx)(x.a.Control.Feedback,{type:"valid",children:"Copied to clipboard!"})]})}),Object(f.jsx)("div",{className:"col-5",children:Object(f.jsxs)("div",{className:"user-key",children:[Object(f.jsxs)("h3",{className:"mb-3",children:["Private Key:"," ",(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.publicKey)&&Object(f.jsx)("span",{id:"private-reveal-eyes",onClick:function(){r.current&&(r.current.value.includes("\u25e6")?r.current.value=JSON.parse(localStorage.getItem("user")).privateKey:r.current.value=new Array(r.current.value.length).fill("\u25e6").join(""))},children:"\ud83d\udc40"})]}),Object(f.jsx)(x.a.Control,{as:"textarea",rows:7,className:"userKey",defaultValue:localStorage.getItem("user")?new Array(JSON.parse(localStorage.getItem("user")).privateKey.length).fill("\u25e6").join(""):"",onFocus:function(e){return g(e,"private")},isValid:i[1],ref:r}),Object(f.jsx)(x.a.Control.Feedback,{type:"valid",children:"Copied to clipboard!"})]})})]}),Object(f.jsx)(A,{}),Object(f.jsx)(P,{details:p,title:"Users"})]})}a(66);function R(e){var t=e.block,a=e.useChain,c=Object(n.useState)(""),s=Object(b.a)(c,2),i=s[0],l=s[1],o=Object(n.useState)(""),j=Object(b.a)(o,2),O=j[0],p=j[1],m=Object(n.useState)(),v=Object(b.a)(m,2),y=v[0],g=v[1],k=Object(n.useState)(!0),S=Object(b.a)(k,2),w=S[0],C=S[1],N=Object(n.useState)(t),T=Object(b.a)(N,2),L=T[0],V=T[1];function H(e){return K.apply(this,arguments)}function K(){return(K=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<=I.instance.blockChain.length)){e.next=8;break}return I.instance.blockChain[t].prevHash=I.instance.blockChain[t-1].currHash,a=JSON.stringify(I.instance.blockChain[t]),e.next=5,I.instance.digestMessage(a);case 5:I.instance.blockChain[t].currHash=e.sent,e.next=0;break;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(d.a)(u.a.mark((function e(){var a,n,r,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Math.round(1e6*Math.random()),n=Math.round(Math.random())+2,e.next=4,I.instance.createTarget(n);case 4:return r=e.sent,p(r),e.next=8,I.instance.mine(a,n,g,l);case 8:if(!((c=e.sent)<=r)){e.next=18;break}return(s=JSON.parse(JSON.stringify(L))).currHash=c,V(s),C(!0),I.instance.blockChain[t.index]=s,e.next=17,H(t.index+1);case 17:localStorage.setItem("chain",JSON.stringify(I.instance.blockChain));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(d.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(JSON.stringify(L)),n=a.index.toString()+a.timestamp.toString()+a.prevHash+t.target.value,e.next=4,I.instance.digestMessage(n);case 4:a.currHash=e.sent,V(a),C(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(f.jsxs)("div",{className:"block-and-chain",children:[Object(f.jsxs)(x.a,{className:"block-background "+(w?"valid-block":"invalid-block"),children:[Object(f.jsxs)(x.a.Group,{controlId:"index-indicator",children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"Index:"})}),Object(f.jsx)(x.a.Control,{type:"number",defaultValue:L.index,disabled:!0})]}),Object(f.jsxs)(x.a.Group,{controlId:"index-indicator",children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"Timestamp:"})}),Object(f.jsx)(x.a.Control,{type:"number",defaultValue:L.timestamp,disabled:!0})]}),Object(f.jsxs)(x.a.Group,{controlId:"prevHash-indicator",children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"Previous Hash:"})}),Object(f.jsx)(x.a.Control,{type:"text",defaultValue:L.prevHash,disabled:!0})]}),Object(f.jsxs)(x.a.Group,{controlId:"prevHash-indicator",children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"Current Hash:"})}),Object(f.jsx)(x.a.Control,{type:"text",value:L.currHash,disabled:!0})]}),Object(f.jsxs)(x.a.Group,{controlId:"prevHash-indicator",children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"Merkle Root:"})}),Object(f.jsx)(x.a.Control,{type:"text",defaultValue:JSON.stringify(L.transactions),onChange:function(e){return function(e){return G.apply(this,arguments)}(e)}})]}),a&&Object(f.jsxs)(r.a.Fragment,{children:[Object(f.jsx)(h.a,{variant:"primary",block:!0,disabled:w,onClick:function(){return function(){return M.apply(this,arguments)}()},children:"Mine"}),Object(f.jsxs)("div",{className:"mt-3",children:[Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"Nonce:"})}),Object(f.jsx)(x.a.Control,{type:"number",defaultValue:y,disabled:!0})]}),Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"Target:"})}),Object(f.jsx)(x.a.Control,{type:"text",defaultValue:O,disabled:!0})]}),Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"Solution:"})}),Object(f.jsx)(x.a.Control,{type:"text",defaultValue:i,style:w?{color:"green"}:{color:"red"},disabled:!0})]})]})]})]}),a&&Object(f.jsx)("div",{className:"chain-link",children:"\ud83d\udd17"})]})}a(67);function D(){return Object(f.jsxs)("div",{children:[Object(f.jsx)(m,{}),Object(f.jsx)("div",{id:"blockchain",children:I.instance.blockChain.map((function(e){return Object(f.jsx)(R,{block:e,useChain:!0},Math.random())}))})]})}a(68);function U(){var e=Object(n.useState)(),t=Object(b.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),s=Object(b.a)(c,2),i=s[0],l=s[1],o=Object(n.useState)(""),j=Object(b.a)(o,2),O=j[0],p=j[1],v=Object(n.useState)(!1),y=Object(b.a)(v,2),g=y[0],k=y[1],S=Object(n.useState)(!0),w=Object(b.a)(S,2),C=w[0],N=w[1],T=Object(n.useRef)(),L=Object(n.useRef)(null);function V(){return(V=Object(d.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),k(!1),t="",T.current=Math.round(1e6*Math.random()),a=Math.round(Math.random())+2,e.next=7,I.instance.createTarget(a);case 7:if(n=e.sent,p(n),!L.current){e.next=15;break}return L.current.disabled=!0,e.next=13,I.instance.mine(T.current,a,r,l);case 13:t=e.sent,L.current.disabled=!1;case 15:t<=n&&k(!0);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(f.jsxs)("div",{className:"container-fluid",children:[Object(f.jsx)(m,{}),Object(f.jsx)("div",{id:"verified-transaction",children:Object(f.jsx)(P,{details:JSON.parse(localStorage.getItem("transactions")),title:"Verified Transactions"})}),Object(f.jsxs)("div",{className:"row d-flex justify-content-center align-items-center my-5 container-fluid",children:[Object(f.jsxs)("div",{className:"col-6",id:"mine-interactive-area",children:[Object(f.jsxs)("div",{id:"statistics",children:[Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)("h5",{children:"Nonce:"}),Object(f.jsx)(x.a.Control,{type:"number",defaultValue:T.current,disabled:!0})]}),Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)("h5",{children:"Current:"}),Object(f.jsx)(x.a.Control,{type:"number",defaultValue:a,disabled:!0})]}),Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)("h5",{children:"Target:"}),Object(f.jsx)(x.a.Control,{type:"text",defaultValue:O,disabled:!0})]}),Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)("h5",{children:"Solution:"}),Object(f.jsx)(x.a.Control,{type:"text",style:g?{color:"green"}:{color:"red"},defaultValue:i,disabled:!0})]})]}),Object(f.jsx)(h.a,{variant:"primary",className:"btn-block d-block mt-3",onClick:function(){return function(){return V.apply(this,arguments)}()},ref:L,children:Object(f.jsx)("h4",{className:"m-0",children:"Mine"})})]}),Object(f.jsxs)("div",{id:"mined-block",className:"col-6 "+(g?"valid-block":"invalid-block"),children:[g&&C&&Object(f.jsx)(h.a,{variant:"success",id:"mine-add-block",onClick:function(){I.instance.addBlock(i,[]),N(!1)},children:"+"}),Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"Index:"})})," ",Object(f.jsx)(x.a.Control,{type:"number",defaultValue:i&&I.instance.lastBlock.index+1,disabled:!0})]}),Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"Timestamp:"})}),Object(f.jsx)(x.a.Control,{type:"number",defaultValue:i?Date.now():"",disabled:!0})]}),Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"Previous Hash:"})}),Object(f.jsx)(x.a.Control,{type:"text",defaultValue:i&&I.instance.lastBlock.currHash,disabled:!0})]}),Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"Current Hash:"})}),Object(f.jsx)(x.a.Control,{type:"text",defaultValue:i,disabled:!0})]}),Object(f.jsxs)(x.a.Group,{children:[Object(f.jsx)(x.a.Label,{children:Object(f.jsx)("h5",{children:"Merkle Root:"})}),Object(f.jsx)(x.a.Control,{type:"text",defaultValue:"abc",disabled:!0})]})]})]})]})}a(69),a(70);function q(){return Object(f.jsxs)(i.a,{basename:"/LibraCoin",children:[Object(f.jsx)(l.b,{exact:!0,path:"/",children:Object(f.jsx)(l.a,{to:"/wallet"})}),Object(f.jsx)(l.b,{path:"/wallet",component:E}),Object(f.jsx)(l.b,{path:"/mine",component:U}),Object(f.jsx)(l.b,{path:"/blockchain",component:D})]})}s.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(q,{})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.8779b3d2.chunk.js.map