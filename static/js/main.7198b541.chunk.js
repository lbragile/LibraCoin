(this.webpackJsonplibracoin=this.webpackJsonplibracoin||[]).push([[0],{58:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),s=a.n(c),i=a(8),l=a(52),o=a(9),u=a(81),b=a(80),d=(a(58),a(1));function j(){return Object(d.jsxs)(u.a,{bg:"none",expand:"lg",className:"mb-3",children:[Object(d.jsx)(u.a.Brand,{href:"https://github.com/lbragile/LibraCoin",children:Object(d.jsx)("img",{src:"./assets/libracoin-logo-256.png",alt:"LibraCoin Logo",width:"64"})}),Object(d.jsx)(u.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(d.jsx)(u.a.Collapse,{id:"basic-navbar-nav",children:Object(d.jsxs)(b.a,{className:"mr-auto",children:[Object(d.jsx)(b.a.Link,{href:"/LibraCoin/wallet",active:location.href.includes("/wallet"),children:"Wallet"}),Object(d.jsx)(b.a.Link,{href:"/LibraCoin/mine",active:location.href.includes("/mine"),children:"Mine"}),Object(d.jsx)(b.a.Link,{href:"/LibraCoin/blockchain",active:location.href.includes("/blockchain"),children:"Blockchain"})]})})]})}var h=a(7),x=a.n(h),O=a(43),p=a(10),f=a(76),m=a(79),v=a(25),y=a(41),g=a(13),S=a(32),k=function e(t,a,n,r){Object(v.a)(this,e),this.index=void 0,this.prevHash=void 0,this.currHash=void 0,this.transactions=void 0,this.timestamp=Date.now(),this.index=t,this.prevHash=a,this.currHash=n,this.transactions=r},w=function e(t,a,n,r){Object(v.a)(this,e),this.amount=void 0,this.from=void 0,this.to=void 0,this.message=void 0,this.amount=t,this.from=a,this.to=n,this.message=r},C=Object(S.a)("chain"),N=Object(S.a)("verifiedTransactions"),T=Object(S.a)("BLOCK_LIMIT"),I=Object(S.a)("users"),A=function(){function e(t){Object(v.a)(this,e),Object.defineProperty(this,C,{writable:!0,value:void 0}),Object.defineProperty(this,N,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:2}),Object.defineProperty(this,I,{writable:!0,value:void 0});var a={type:"public",extractable:!0,algorithm:{name:"ECDSA"},usages:["verify"]},n=[new w(0,a,a)],r=Array(64).fill("0").join("");Object(g.a)(this,C)[C]=null!==t&&void 0!==t?t:[new k(0,"",r,n)],Object(g.a)(this,N)[N]=[],Object(g.a)(this,I)[I]=[]}return Object(y.a)(e,[{key:"blockChain",get:function(){return Object(g.a)(this,C)[C]}},{key:"lastBlock",get:function(){return Object(g.a)(this,C)[C][Object(g.a)(this,C)[C].length-1]}},{key:"addUser",value:function(e){Object(g.a)(this,I)[I].push(e)}},{key:"randomHash",value:function(t){return e.bufferToHex(window.crypto.getRandomValues(new Uint32Array(t)))}},{key:"digestMessage",value:function(){var t=Object(p.a)(x.a.mark((function t(a){var n,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(new TextEncoder).encode(a),t.next=3,window.crypto.subtle.digest("SHA-256",n);case 3:return r=t.sent,t.abrupt("return",e.bufferToHex(r));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"createTarget",value:function(){var t=Object(p.a)(x.a.mark((function t(a){var n,r,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.digestMessage(e.instance.randomHash(20));case 2:return n=t.sent,r=new RegExp("^.{0,".concat(a,"}"),"g"),c=Array(a).fill("0").join(""),t.abrupt("return",n.replace(r,c));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"mine",value:function(){var e=Object(p.a)(x.a.mark((function e(t,a,n,r){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c="";case 1:if(!(t<=Number.MAX_SAFE_INTEGER)){e.next=12;break}return e.next=4,this.digestMessage(t.toString());case 4:if(c=e.sent,r(c),!c.substr(0,a).split("").every((function(e){return"0"===e}))){e.next=9;break}return e.abrupt("break",12);case 9:n(t++),e.next=1;break;case 12:return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"updateBlocksInChain",value:function(){var t=Object(p.a)(x.a.mark((function t(a){var n,r,c,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n=1;case 2:if(!(r<a.length)){t.next=9;break}if("00"===a[r-1].currHash.slice(0,2)){t.next=6;break}return n=r-1,t.abrupt("break",9);case 6:r++,t.next=2;break;case 9:c=[],s=0;case 11:if(!(s<a.length)){t.next=22;break}if(!(s>n)){t.next=18;break}return a[s].prevHash=a[s-1].currHash,t.next=16,e.instance.digestMessage(a[s].prevHash);case 16:a[s].currHash=t.sent,localStorage.setItem("chain",JSON.stringify(a));case 18:c.push(s<n);case 19:s++,t.next=11;break;case 22:return t.abrupt("return",{validStates:c,blockchain:a});case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"verifyTransaction",value:function(){var t=Object(p.a)(x.a.mark((function t(a,n){var r,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.stringToArrayBuffer(JSON.stringify(a)),t.next=3,crypto.subtle.verify({name:"ECDSA",hash:"SHA-256"},a.from,n,r);case 3:return(c=t.sent)&&(Object(g.a)(this,N)[N].push(a),console.log("\u2705 Verified Transaction!"),console.log("Transaction Pool Now Has ".concat(Object(g.a)(this,N)[N].length," Verified Transactions"))),Object(g.a)(this,N)[N].length===Object(g.a)(this,T)[T]&&(this.addBlock("",Object(g.a)(this,N)[N]),Object(g.a)(this,N)[N]=[]),t.abrupt("return",c);case 7:case"end":return t.stop()}}),t,this)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"addBlock",value:function(e,t){var a=new k(this.lastBlock.index+1,this.lastBlock.currHash,e,t);Object(g.a)(this,C)[C].push(a),localStorage.setItem("chain",JSON.stringify(this.blockChain))}}],[{key:"stringToArrayBuffer",value:function(e){for(var t=new ArrayBuffer(2*e.length),a=new Uint16Array(t),n=0,r=e.length;n<r;n++)a[n]=e.charCodeAt(n);return t}},{key:"bufferToHex",value:function(e){return Array.from(new Uint8Array(e)).map((function(e){return e.toString(16).padStart(2,"0")})).join("")}}]),e}();A.instance=new A(JSON.parse(localStorage.getItem("chain")));var E,V=function(){function e(){Object(v.a)(this,e),this.publicKey=void 0,this.privateKey=void 0,this.balance=void 0,this.publicKey={type:"public",extractable:!0,algorithm:{name:"ECDSA"},usages:["verify"]},this.privateKey={type:"private",extractable:!0,algorithm:{name:"ECDSA"},usages:["sign"]},this.balance=1e3}return Object(y.a)(e,[{key:"initialize",value:function(){var e=Object(p.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]);case 2:t=e.sent,this.publicKey=t.publicKey,this.privateKey=t.privateKey;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMessageEncoding",value:function(e){return(new TextEncoder).encode(e)}},{key:"sendMoney",value:function(){var e=Object(p.a)(x.a.mark((function e(t,a,n){var r,c,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<=this.balance)){e.next=12;break}return r=new w(t,this.publicKey,a,n),c=A.stringToArrayBuffer(JSON.stringify(r)),e.next=5,window.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},this.privateKey,c);case 5:return s=e.sent,e.next=8,A.instance.verifyTransaction(r,s);case 8:e.sent?this.balance-=t:alert("Invalid transaction!"),e.next=13;break;case 12:alert("Your balance is not high enough to cover this transaction.");case 13:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()}],[{key:"CryptoKeyToHex",value:function(){var e=Object(p.a)(x.a.mark((function e(t,a){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey(t,a);case 2:return n=e.sent,e.abrupt("return",A.bufferToHex(n));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),L=r.a.createContext(void 0);function H(e,t,a){if(e.target.select(),e.target.setSelectionRange(0,1e6),document.execCommand("copy"),a){var n="public"===a;t([n,!n&&!e.target.value.includes("\u25e6")])}else t([!0])}!function(e){e.UPDATE_VERIFIED_TRANS="UPDATE_VERIFIED_TRANS",e.UPDATE_SELECTED_TRANS="UPDATE_SELECTED_TRANS",e.UPDATE_USERS="UPDATE_USERS"}(E||(E={}));a(64);function K(){var e,t,a=Object(n.useContext)(L),r=a.state,c=a.dispatch,s=Object(n.useRef)(null),l=Object(n.useRef)(null),o=Object(n.useRef)(4),u=Object(n.useState)([!1,!1]),b=Object(i.a)(u,2),j=b[0],h=b[1],v=function(){var e=Object(p.a)(x.a.mark((function e(){var t,a,n,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new V,e.next=3,t.initialize();case 3:return e.next=5,V.CryptoKeyToHex("spki",t.publicKey);case 5:return a=e.sent,e.next=8,V.CryptoKeyToHex("pkcs8",t.privateKey);case 8:n=e.sent,s.current&&l.current&&(s.current.innerText=a,l.current.innerText=new Array(n.length).fill("\u25e6").join("")),i=[].concat(Object(O.a)(r.users),[{publicKey:a,balance:t.balance}]),localStorage.setItem("user",JSON.stringify({publicKey:a,privateKey:n,balance:t.balance})),localStorage.setItem("users",JSON.stringify(i)),c({type:E.UPDATE_USERS,payload:{users:i}});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"row",children:[(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.publicKey)?Object(d.jsx)("div",{className:"col-1"}):Object(d.jsx)("div",{className:"col-2",children:Object(d.jsx)(f.a,{variant:"primary",className:"p-3 font-weight-bold",onClick:v,children:"Create Wallet"})}),Object(d.jsx)("div",{className:"col-5",children:Object(d.jsxs)(m.a.Group,{className:"user-key",children:[Object(d.jsx)(m.a.Label,{className:"mb-3",children:Object(d.jsx)("h3",{children:"Public Key:"})}),Object(d.jsx)(m.a.Control,{as:"textarea",rows:o.current,defaultValue:localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user")).publicKey,isValid:j[0],onFocus:function(e){return H(e,h,"public")},ref:s}),Object(d.jsx)(m.a.Control.Feedback,{type:"valid",children:"Copied to clipboard!"})]})}),Object(d.jsx)("div",{className:"col-5",children:Object(d.jsxs)(m.a.Group,{className:"user-key",children:[Object(d.jsx)(m.a.Label,{className:"mb-3",children:Object(d.jsxs)("h3",{children:["Private Key:"," ",(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.publicKey)&&Object(d.jsx)("span",{id:"private-reveal-eyes",onClick:function(){l.current&&(l.current.value.includes("\u25e6")?l.current.value=JSON.parse(localStorage.getItem("user")).privateKey:l.current.value=new Array(l.current.value.length).fill("\u25e6").join(""))},children:"\ud83d\udc40"})]})}),Object(d.jsx)(m.a.Control,{as:"textarea",rows:o.current,defaultValue:localStorage.getItem("user")?new Array(JSON.parse(localStorage.getItem("user")).privateKey.length).fill("\u25e6").join(""):"",onFocus:function(e){return H(e,h,"private")},isValid:j[1],ref:l}),Object(d.jsx)(m.a.Control.Feedback,{type:"valid",children:"Copied to clipboard!"})]})})]})}var B=a(22),M=a(78),D=a(77);function R(e){return Object(d.jsx)("div",{children:Object(d.jsxs)(M.a,{show:e.show,validated:e.validated.toString(),centered:!0,backdrop:"static",onHide:function(){e.setShow(!1),e.setSigned(!1),e.setValidated(!1)},animation:!1,children:[Object(d.jsx)(M.a.Header,{closeButton:!0,children:Object(d.jsx)("h4",{children:"LibraCoin Transaction (Send)"})}),Object(d.jsx)(M.a.Body,{children:Object(d.jsxs)(m.a,{noValidate:!0,onSubmit:e.handleSubmit,children:[Object(d.jsxs)(m.a.Group,{controlId:"SendTo",children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("b",{children:"To:"})}),Object(d.jsx)(m.a.Control,{type:"text",defaultValue:e.details.to,disabled:!0})]}),Object(d.jsxs)(m.a.Group,{controlId:"SendAmount",children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("b",{children:"Amount:"})}),Object(d.jsxs)(D.a,{className:"mb-2",children:[Object(d.jsx)(m.a.Control,{type:"text",defaultValue:e.details.amount,disabled:!0}),Object(d.jsx)(D.a.Prepend,{children:Object(d.jsx)(D.a.Text,{children:"LC"})})]})]}),Object(d.jsxs)(m.a.Group,{controlId:"TransMessage",children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("b",{children:"Message:"})}),Object(d.jsx)(m.a.Control,{as:"textarea",defaultValue:e.details.message,rows:3,disabled:!0})]}),Object(d.jsxs)(m.a.Group,{controlId:"SendSignature",children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("b",{children:"Signature:"})}),Object(d.jsx)(m.a.Control,{type:"text",defaultValue:e.details.signature,disabled:!0}),Object(d.jsx)(m.a.Text,{className:"text-muted",children:"Receiver uses this along with your public key to verify transaction."})]}),Object(d.jsx)(f.a,{variant:"primary",type:"submit",block:!0,children:Object(d.jsx)("b",{children:"Send"})})]})})]})})}function J(e){var t,a;return Object(d.jsx)("div",{children:Object(d.jsxs)(M.a,{show:e.show,centered:!0,backdrop:"static",onHide:function(){return e.setShow(!1)},animation:!1,children:[Object(d.jsx)(M.a.Header,{closeButton:!0,children:Object(d.jsx)("h4",{children:"LibraCoin Transaction (Sign)"})}),Object(d.jsx)(M.a.Body,{children:Object(d.jsxs)(m.a,{noValidate:!0,validated:e.validated,onSubmit:e.handleSubmit,children:[Object(d.jsxs)(m.a.Group,{controlId:"TransFrom",children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("b",{children:"From:"})}),Object(d.jsx)(m.a.Control,{type:"text",defaultValue:(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.publicKey)||""}),Object(d.jsx)(m.a.Text,{className:"text-muted",children:"Your public key \u2192 used to verify transaction was signed using your private key"})]}),Object(d.jsxs)(m.a.Group,{controlId:"TransTo",children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("b",{children:"To:"})}),Object(d.jsx)(m.a.Control,{type:"text",pattern:"[A-Za-z0-9]{182,182}",required:!0}),Object(d.jsx)(m.a.Control.Feedback,{type:"invalid",children:"Must be of the same format as your public key"})]}),Object(d.jsxs)(m.a.Group,{controlId:"TransAmount",children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("b",{children:"Amount:"})}),Object(d.jsxs)(D.a,{className:"mb-2",children:[Object(d.jsx)(m.a.Control,{type:"text",placeholder:"1.00",onBlur:function(e){return function(e){var t,a=(null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.balance)||1e3;e.target.value=Math.min(Math.max(.1,+e.target.value),a).toFixed(2).toString()}(e)},required:!0}),Object(d.jsx)(D.a.Prepend,{children:Object(d.jsx)(D.a.Text,{children:"LC"})})]})]}),Object(d.jsxs)(m.a.Group,{controlId:"TransMessage",children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("b",{children:"Message:"})}),Object(d.jsx)(m.a.Control,{as:"textarea",placeholder:"optional message...",rows:3})]}),Object(d.jsxs)(m.a.Group,{controlId:"TransPrivate",children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("b",{children:"Private Key:"})}),Object(d.jsx)(m.a.Control,{type:"text",defaultValue:(null===(a=JSON.parse(localStorage.getItem("user")))||void 0===a?void 0:a.privateKey)||"",required:!0}),Object(d.jsx)(m.a.Text,{className:"text-muted",children:"This is not shared with anyone, keep this secret!"})]}),Object(d.jsx)(f.a,{variant:"primary",type:"submit",block:!0,children:Object(d.jsx)("b",{children:"Sign"})})]})})]})})}function G(){var e,t,a=Object(n.useState)(!1),r=Object(i.a)(a,2),c=r[0],s=r[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),u=o[0],b=o[1],j=Object(n.useState)(!1),h=Object(i.a)(j,2),f=h[0],m=h[1],v=Object(n.useRef)({to:"",from:null!==(e=null===(t=JSON.parse(localStorage.getItem("user")))||void 0===t?void 0:t.publicKey)&&void 0!==e?e:"",amount:0,message:"",signature:""}),y=function(){var e=Object(p.a)(x.a.mark((function e(t){var a,n,r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=t.currentTarget,b(!0),!a.checkValidity()||f){e.next=15;break}return n=Object(B.a)({},a),r=Object.values(n).slice(1,4).map((function(e){return e.value})),v.current.to=r[0],v.current.amount=+r[1],v.current.message=r[2],e.next=11,A.instance.digestMessage(JSON.stringify(v.current));case 11:v.current.signature=e.sent,m(!0),e.next=16;break;case 15:a.checkValidity()&&(c=JSON.parse(localStorage.getItem("transactions"))||[],localStorage.setItem("transactions",JSON.stringify([].concat(Object(O.a)(c),[v.current]))),s(!1),m(!1),b(!1));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{className:"font-weight-bold btn btn-info p-3 my-5",onClick:function(){return s(!0)},children:"Make Transaction"}),f?Object(d.jsx)(R,{show:c,setShow:s,validated:u,setValidated:b,setSigned:m,handleSubmit:y,details:v.current}):Object(d.jsx)(J,{show:c,setShow:s,validated:u,handleSubmit:y})]})}a(65);function P(){var e,t=Object(n.useContext)(L).state,a=Object(n.useState)([!1]),r=Object(i.a)(a,2),c=r[0],s=r[1];return Object(d.jsx)("div",{children:Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:Object(d.jsx)("b",{children:"Users:"})}),Object(d.jsx)("div",{id:"list-background",children:null===(e=t.users)||void 0===e?void 0:e.map((function(e){return Object(d.jsxs)(m.a,{className:"item",children:[Object(d.jsxs)(m.a.Group,{children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("h5",{className:c?"my-0":"mt-1",children:"Public Key:"})}),Object(d.jsx)(m.a.Control,{type:"text",className:"text-truncate",onFocus:function(e){return H(e,s)},defaultValue:e.publicKey,isValid:c[0]}),Object(d.jsx)(m.a.Control.Feedback,{type:"valid",children:"Copied to clipboard"})]}),Object(d.jsxs)(m.a.Group,{children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("h5",{className:"my-0",children:"Balance:"})}),Object(d.jsxs)("p",{children:[e.balance.toFixed(2)," LC"]})]})]},Math.random())}))})]})})}function _(){return Object(d.jsxs)("div",{className:"container-fluid my-3",children:[Object(d.jsx)(j,{}),Object(d.jsx)(K,{}),Object(d.jsx)(G,{}),Object(d.jsx)(P,{})]})}function U(e){var t=Object(n.useContext)(L),a=t.state,r=t.dispatch,c=Object(n.useRef)(),s=Object(n.useRef)(null),l=Object(n.useState)(),o=Object(i.a)(l,2),u=o[0],b=o[1],j=Object(n.useState)(),h=Object(i.a)(j,2),O=h[0],v=h[1];function y(){return(y=Object(p.a)(x.a.mark((function t(){var a,n,i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setShowBtn(!0),e.setIsValid(!1),a="",c.current=Math.round(1e6*Math.random()),n=Math.round(Math.random())+2,t.next=7,A.instance.createTarget(n);case 7:if(i=t.sent,v(i),!s.current){t.next=15;break}return s.current.disabled=!0,t.next=13,A.instance.mine(c.current,n,b,e.setSolution);case 13:a=t.sent,s.current.disabled=!1;case 15:a<=i&&(e.index&&(A.instance.blockChain[e.index].currHash=a,localStorage.setItem("chain",JSON.stringify(A.instance.blockChain))),r({type:E.UPDATE_VERIFIED_TRANS}),A.instance.updateBlocksInChain(A.instance.blockChain),e.setIsValid(!0));case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(d.jsxs)("div",{className:e.chain?"bordered-background":"col-6 mx-3",children:[Object(d.jsxs)(m.a.Group,{children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("h5",{className:"my-0",children:"Nonce:"})}),Object(d.jsx)(m.a.Control,{type:"number",defaultValue:c.current,disabled:!0})]}),Object(d.jsxs)(m.a.Group,{children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("h5",{className:"my-0",children:"Block Header (Current):"})}),Object(d.jsx)(m.a.Control,{type:"number",defaultValue:u,disabled:!0})]}),Object(d.jsxs)(m.a.Group,{children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("h5",{className:"my-0",children:"Target:"})}),Object(d.jsx)(m.a.Control,{type:"text",defaultValue:O,disabled:!0})]}),Object(d.jsxs)(m.a.Group,{children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("h5",{className:"my-0",children:"Solution:"})}),Object(d.jsx)(m.a.Control,{type:"text",style:e.isValid?{color:"green"}:{color:"red"},defaultValue:e.solution,disabled:!0})]}),Object(d.jsx)(f.a,{variant:"primary",className:"btn-block d-block mt-3",disabled:e.isValid||0===a.selectedTrans.length,onClick:function(){return function(){return y.apply(this,arguments)}()},ref:s,children:Object(d.jsx)("h4",{className:"m-0",children:"Mine"})})]})}a(66);function F(e){var t=e.details,a=e.startValid,c=e.setBlockchain,s=Object(n.useState)(""),l=Object(i.a)(s,2),o=l[0],u=l[1],b=Object(n.useState)(a),j=Object(i.a)(b,2),h=j[0],O=j[1],v=Object(n.useState)(!0),y=Object(i.a)(v,2),g=y[0],S=y[1],k=Object(n.useState)(t?t.timestamp:A.instance.lastBlock.timestamp),w=Object(i.a)(k,2),C=w[0],N=w[1];function T(){return(T=Object(p.a)(x.a.mark((function e(a){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return n=A.instance.blockChain[t.index].currHash,e.next=4,A.instance.digestMessage(A.instance.blockChain[t.index].prevHash+a.target.value);case 4:r=e.sent,A.instance.blockChain[t.index].currHash=r,localStorage.setItem("chain",JSON.stringify(A.instance.blockChain)),u(r),O(r===n&&"00"===r.slice(0,2)),c&&c(A.instance.blockChain);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){N(Date.now())}),[o]),Object(d.jsxs)(r.a.Fragment,{children:[!t&&Object(d.jsx)(U,{chain:!1,setShowBtn:S,solution:o,setSolution:u,isValid:h,setIsValid:O}),Object(d.jsxs)("div",{className:"block "+(t?"col-12 ":"")+(h?"valid-block":"invalid-block"),children:[Object(d.jsxs)(m.a.Group,{children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("h5",{children:"Index:"})}),Object(d.jsx)(m.a.Control,{type:"number",defaultValue:t?t.index:A.instance.lastBlock.index+1,disabled:!0})]}),Object(d.jsxs)(m.a.Group,{children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("h5",{children:"Timestamp:"})}),Object(d.jsx)(m.a.Control,{type:"number",value:!t||o?C:t.timestamp,disabled:!0})]}),Object(d.jsxs)(m.a.Group,{children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("h5",{children:"Previous Hash:"})}),Object(d.jsx)(m.a.Control,{type:"text",defaultValue:t?t.prevHash:A.instance.lastBlock.currHash,disabled:!0})]}),Object(d.jsxs)(m.a.Group,{children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("h5",{children:"Current Hash:"})}),Object(d.jsx)(m.a.Control,{type:"text",value:!t||o?o:t.currHash,disabled:!0})]}),Object(d.jsxs)(m.a.Group,{children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("h5",{children:"Merkle Root:"})}),Object(d.jsx)(m.a.Control,{type:"text",value:0===(null===t||void 0===t?void 0:t.index)?"":"abc",disabled:t&&0===t.index,onChange:function(e){return function(e){return T.apply(this,arguments)}(e)}})]}),!t&&h&&g&&Object(d.jsx)(f.a,{variant:"success",block:!0,onClick:function(){return A.instance.addBlock(o,[]),void S(!1)},children:Object(d.jsx)("h3",{className:"my-0 font-weight-bold",children:"+"})}),t&&Object(d.jsx)(U,{chain:!0,index:t.index,setShowBtn:S,solution:o,setSolution:u,isValid:h,setIsValid:O})]})]})}a(67);function q(){var e=Object(n.useState)(A.instance.blockChain),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(new Array(a.length).fill(!0)),s=Object(i.a)(c,2),l=s[0],o=s[1];return Object(n.useEffect)((function(){Object(p.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.instance.updateBlocksInChain(a);case 2:t=e.sent,o(t.validStates),r(t.blockchain);case 5:case"end":return e.stop()}}),e)})))()}),[a]),Object(d.jsxs)("div",{children:[Object(d.jsx)(j,{}),Object(d.jsx)("div",{id:"blockchain",children:a.map((function(e,t){return Object(d.jsxs)("div",{className:"block-and-chain",children:[Object(d.jsx)(F,{details:e,startValid:l[t],setBlockchain:r}),Object(d.jsx)("div",{className:"chain",children:"\ud83d\udd17"})]},Math.random())}))})]})}a(68);function z(){var e=Object(n.useContext)(L),t=e.state,a=e.dispatch,r=Object(n.useState)([!1]),c=Object(i.a)(r,2),s=c[0],l=c[1];return Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:Object(d.jsx)("b",{children:"Verified Transactions:"})}),Object(d.jsx)("div",{id:"list-background",children:t.verifiedTrans.map((function(e){return Object(d.jsxs)("div",{className:"trans-item "+(t.selectedTrans.map((function(e){return e.signature})).includes(e.signature)?"selected":"not-selected"),onClick:function(){return function(e){var t=JSON.parse(localStorage.getItem("selectedTransactions"))||[];t.map((function(e){return e.signature})).includes(e.signature)?t=t.filter((function(t){return t.signature!==e.signature})):t.push(e),a({type:E.UPDATE_SELECTED_TRANS,payload:{selectedTrans:t}}),localStorage.setItem("selectedTransactions",JSON.stringify(t))}(e)},children:[Object(d.jsxs)(m.a.Group,{className:"mb-1 text-center",children:[Object(d.jsx)(m.a.Control,{type:"text",className:"text-truncate",defaultValue:e.from}),Object(d.jsx)("h3",{className:"my-0",children:"\u2193"}),Object(d.jsx)(m.a.Control,{type:"text",className:"text-truncate",defaultValue:e.to})]}),Object(d.jsxs)(m.a.Group,{className:"mb-1",children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("h5",{className:"my-0",children:"Message:"})}),Object(d.jsx)(m.a.Control,{as:"textarea",className:"text-truncate",defaultValue:e.message})]}),Object(d.jsxs)(m.a.Group,{className:"mb-1",children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("h5",{className:"my-0",children:"Amount:"})}),Object(d.jsx)(m.a.Control,{type:"number",className:"text-truncate",defaultValue:e.amount})]}),Object(d.jsxs)(m.a.Group,{className:"mb-1",children:[Object(d.jsx)(m.a.Label,{children:Object(d.jsx)("h5",{className:"my-0",children:"Signature:"})}),Object(d.jsx)(m.a.Control,{type:"text",className:"text-truncate",defaultValue:e.signature,onFocus:function(e){return H(e,l)},isValid:s[0]}),Object(d.jsx)(m.a.Control.Feedback,{type:"valid",children:"Copied to clipboard"})]})]},Math.random())}))})]})}function W(){return Object(d.jsxs)("div",{className:"container-fluid",children:[Object(d.jsx)(j,{}),Object(d.jsx)("div",{id:"verified-transaction",children:Object(d.jsx)(z,{})}),Object(d.jsx)("div",{className:"row d-flex justify-content-center align-items-center my-2 container-fluid",children:Object(d.jsx)(F,{startValid:!1})})]})}a(69),a(70);var Y=function(e,t){switch(t.type){case E.UPDATE_VERIFIED_TRANS:var a=e.selectedTrans.map((function(e){return e.signature})),n=e.verifiedTrans.filter((function(e){return!a.includes(e.signature)}));return Object(B.a)(Object(B.a)({},e),{},{verifiedTrans:n});case E.UPDATE_SELECTED_TRANS:return Object(B.a)(Object(B.a)({},e),{},{selectedTrans:t.payload.selectedTrans});case E.UPDATE_USERS:return Object(B.a)(Object(B.a)({},e),{},{users:t.payload.users});default:return e}};function X(){var e,t,a,r=Object(n.useReducer)(Y,{verifiedTrans:null!==(e=JSON.parse(localStorage.getItem("transactions")))&&void 0!==e?e:[],selectedTrans:null!==(t=JSON.parse(localStorage.getItem("selectedTransactions")))&&void 0!==t?t:[],users:null!==(a=JSON.parse(localStorage.getItem("users")))&&void 0!==a?a:[]}),c=Object(i.a)(r,2),s=c[0],u=c[1];return Object(d.jsx)(l.a,{basename:"/LibraCoin",children:Object(d.jsxs)(L.Provider,{value:{state:s,dispatch:u},children:[Object(d.jsx)(o.b,{exact:!0,path:"/",children:Object(d.jsx)(o.a,{to:"/wallet"})}),Object(d.jsx)(o.b,{path:"/wallet",component:_}),Object(d.jsx)(o.b,{path:"/mine",component:W}),Object(d.jsx)(o.b,{path:"/blockchain",component:q})]})})}s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(X,{})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.7198b541.chunk.js.map